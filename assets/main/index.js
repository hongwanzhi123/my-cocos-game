System.register("chunks:///_virtual/DoorStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./StateMachine.ts","./IdleSubStateMachine3.ts","./DeathSubStateMachine.ts"],(function(t){"use strict";var e,i,n,a,s,r,c,h,o,u,p;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Animation},function(t){a=t.inheritsLoose,s=t.asyncToGenerator},function(t){r=t.PARAMS_NAME_ENUM},function(t){c=t.getInitParamsTrigger,h=t.getInitParamsNumber,o=t.StateMachine},function(t){u=t.default},function(t){p=t.default}],execute:function(){var f;e._RF.push({},"01bd83QE/hLDaEsLGa5i7Sd","DoorStateMachine",void 0);var m=i.ccclass;i.property,t("DoorStateMachine",m("DoorStateMachine")(f=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var i=e.prototype;return i.init=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponet=this.addComponent(n),this.initParams(),this.initStateMachine(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.initParams=function(){this.params.set(r.IDLE,c()),this.params.set(r.DIRECTION,h()),this.params.set(r.DEATH,h())},i.initStateMachine=function(){this.stateMachines.set(r.IDLE,new u(this)),this.stateMachines.set(r.DEATH,new p(this))},i.initAnimationEvent=function(){},i.run=function(){switch(this.currentState){case this.stateMachines.get(r.IDLE):case this.stateMachines.get(r.DEATH):this.params.get(r.IDLE).value?this.currentState=this.stateMachines.get(r.IDLE):this.params.get(r.DEATH).value?this.currentState=this.stateMachines.get(r.DEATH):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(r.IDLE)}},e}(o))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/BlockTurnRightSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,i,s,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.DIRECTION_ENUM},function(t){s=t.default},function(t){c=t.default}],execute:function(){e._RF.push({},"099a2pCPORA76qBLsICJpSV","BlockTurnRightSubStateMachine",void 0);var u="texture/player/blockturnright";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new s(e,u+"/top")),n.stateMachines.set(i.BOTTOM,new s(e,u+"/bottom")),n.stateMachines.set(i.LEFT,new s(e,u+"/left")),n.stateMachines.set(i.RIGHT,new s(e,u+"/right")),n}return n(e,t),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/BlockRightSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,i,s,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.DIRECTION_ENUM},function(t){s=t.default},function(t){c=t.default}],execute:function(){e._RF.push({},"0a884uJAl9EfKpUVFbVkLMR","BlockRightSubStateMachine",void 0);var a="texture/player/blockright";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new s(e,a+"/top")),n.stateMachines.set(i.BOTTOM,new s(e,a+"/bottom")),n.stateMachines.set(i.LEFT,new s(e,a+"/left")),n.stateMachines.set(i.RIGHT,new s(e,a+"/right")),n}return n(e,t),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/EntityManager.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./TileManager.ts"],(function(t){"use strict";var e,n,i,r,s,o,a,c,u,h,d,f,p,y,_;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Component,r=t.Sprite,s=t.UITransform},function(t){o=t.randomByLen},function(t){a=t.inheritsLoose,c=t.defineProperty,u=t.assertThisInitialized,h=t.createClass,d=t.asyncToGenerator},function(t){f=t.PARAMS_NAME_ENUM,p=t.DIRECTION_ORDER_ENUM},function(t){y=t.TILE_WIDTH,_=t.TILE_HEIGH}],execute:function(){var l;e._RF.push({},"0c734gsYMFPHoyAIMiC+xn2","EntityManager",void 0);var g=n.ccclass;n.property,t("EntityManager",g("EntityManager")(l=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,c(u(e),"id",o(12)),c(u(e),"x",0),c(u(e),"y",0),c(u(e),"fsm",void 0),c(u(e),"_direction",void 0),c(u(e),"_state",void 0),c(u(e),"type",void 0),e}a(e,t);var n=e.prototype;return n.init=function(){var t=d(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.addComponent(r).sizeMode=r.SizeMode.CUSTOM,this.getComponent(s).setContentSize(4*y,4*_),this.x=e.x,this.y=e.y,this.type=e.type,this.direction=e.direction,this.state=e.state;case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.update=function(){this.node.setPosition(this.x*y-1.5*y,-this.y*_+1.5*_)},n.onDestroy=function(){},h(e,[{key:"direction",get:function(){return this._direction},set:function(t){this._direction=t,this.fsm.setParams(f.DIRECTION,p[this._direction])}},{key:"state",get:function(){return this._state},set:function(t){this._state=t,this.fsm.setParams(this._state,!0)}}]),e}(i))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./StateMachine.ts","./SpikesOneSubStateMachine.ts","./SpikesTwoSubStateMachine.ts","./SpikesThreeSubStateMachine.ts","./SpikesFourSubStateMachine.ts","./SpikesManager.ts"],(function(t){"use strict";var e,i,n,s,a,S,r,c,h,o,u,E,_,p,P;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Animation},function(t){s=t.inheritsLoose,a=t.asyncToGenerator},function(t){S=t.PARAMS_NAME_ENUM,r=t.ENTITY_TYPE_ENUM,c=t.SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM},function(t){h=t.getInitParamsNumber,o=t.StateMachine},function(t){u=t.default},function(t){E=t.default},function(t){_=t.default},function(t){p=t.default},function(t){P=t.SpikesManager}],execute:function(){var M;e._RF.push({},"13e40Eb3mRNhanUDD1MHa6b","SpikesStateMachine",void 0);var f=i.ccclass;i.property,t("SpikesStateMachine",f("SpikesStateMachine")(M=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var i=e.prototype;return i.init=function(){var t=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponet=this.addComponent(n),this.initParams(),this.initStateMachine(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.initParams=function(){this.params.set(S.SPIKES_CUR_COUNT,h()),this.params.set(S.SPIKES_TOTAL_COUNT,h())},i.initStateMachine=function(){this.stateMachines.set(r.SPIKES_ONE,new u(this)),this.stateMachines.set(r.SPIKES_TWO,new E(this)),this.stateMachines.set(r.SPIKES_THREE,new _(this)),this.stateMachines.set(r.SPIKES_FOUR,new p(this))},i.initAnimationEvent=function(){var t=this;this.animationComponet.on(n.EventType.FINISHED,(function(){var e=t.animationComponet.defaultClip.name,i=t.getParams(S.SPIKES_TOTAL_COUNT);(i===c.SPIKES_ONE&&e.includes("spikesone/two")||i===c.SPIKES_TWO&&e.includes("spikestwo/three")||i===c.SPIKES_THREE&&e.includes("spikesthree/four")||i===c.SPIKES_FOUR&&e.includes("spikesfour/five"))&&t.node.getComponent(P).backZero()}))},i.run=function(){var t=this.getParams(S.SPIKES_TOTAL_COUNT);switch(this.currentState){case this.stateMachines.get(r.SPIKES_ONE):case this.stateMachines.get(r.SPIKES_TWO):case this.stateMachines.get(r.SPIKES_THREE):case this.stateMachines.get(r.SPIKES_FOUR):t===c.SPIKES_ONE?this.currentState=this.stateMachines.get(r.SPIKES_ONE):t===c.SPIKES_TWO?this.currentState=this.stateMachines.get(r.SPIKES_TWO):t===c.SPIKES_THREE?this.currentState=this.stateMachines.get(r.SPIKES_THREE):t===c.SPIKES_FOUR?this.currentState=this.stateMachines.get(r.SPIKES_FOUR):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(r.SPIKES_ONE)}},e}(o))||M);e._RF.pop()}}}));

System.register("chunks:///_virtual/level6.ts",["cc","./index2.ts"],(function(L){"use strict";var t,e,O,s,c;return{setters:[function(L){t=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,O=L.DIRECTION_ENUM,s=L.ENTITY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"1671ft4ErtOQY1tLmRFLmLc","level6",void 0);var r=[[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_COLUMN},{src:1,type:e.FLOOR},{src:22,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:22,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],y={x:0,y:3,direction:O.RIGHT,state:s.IDLE,type:c.PLAYER},p=[{x:5,y:2,direction:O.LEFT,state:s.IDLE,type:c.SKELETON_WOODEN},{x:5,y:4,direction:O.LEFT,state:s.IDLE,type:c.SKELETON_WOODEN}],R={x:8,y:3,direction:O.LEFT,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:y,enemies:p,spikes:[],bursts:[],door:R});t._RF.pop()}}}));

System.register("chunks:///_virtual/level3.ts",["cc","./index2.ts"],(function(l){"use strict";var t,e,y,L,c;return{setters:[function(l){t=l.cclegacy},function(l){e=l.TILE_TYPE_ENUM,y=l.DIRECTION_ENUM,L=l.ENTITY_STATE_ENUM,c=l.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"19e4fBaysZGG6xNynRwj1WG","level3",void 0);var s=[[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:20,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:20,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT},{src:null,type:null}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:22,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:22,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],p={x:0,y:8,direction:y.RIGHT,state:L.IDLE,type:c.PLAYER},r=[{x:6,y:7,direction:y.TOP,state:L.IDLE,type:c.SKELETON_WOODEN}],O=[{x:4,y:8,type:c.SPIKES_ONE,count:0},{x:4,y:9,type:c.SPIKES_ONE,count:0},{x:6,y:3,type:c.SPIKES_ONE,count:0},{x:7,y:3,type:c.SPIKES_ONE,count:0},{x:6,y:5,type:c.SPIKES_ONE,count:0},{x:7,y:5,type:c.SPIKES_ONE,count:0}],n={x:6,y:0,direction:y.BOTTOM,state:L.IDLE,type:c.DOOR};l("default",{mapInfo:s,player:p,enemies:r,spikes:O,bursts:[],door:n});t._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesThreeSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./SpikesSubStateMachine.ts"],(function(e){"use strict";var t,s,n,i,u;return{setters:[function(e){t=e.cclegacy},function(e){s=e.inheritsLoose},function(e){n=e.SPIKES_COUNT_ENUM},function(e){i=e.default},function(e){u=e.default}],execute:function(){t._RF.push({},"22bbbew7yFLv45AuBKNu7HY","SpikesThreeSubStateMachine",void 0);var a="texture/spikes/spikesthree";e("default",function(e){function t(t){var s;return(s=e.call(this,t)||this).stateMachines.set(n.ZERO,new i(t,a+"/zero")),s.stateMachines.set(n.ONE,new i(t,a+"/one")),s.stateMachines.set(n.TWO,new i(t,a+"/two")),s.stateMachines.set(n.THREE,new i(t,a+"/three")),s.stateMachines.set(n.FOUR,new i(t,a+"/four")),s}return s(t,e),t}(u));t._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Singleton.ts"],(function(e){"use strict";var t,n,r,u,o,c;return{setters:[function(e){t=e.cclegacy,n=e.resources,r=e.SpriteFrame},function(e){u=e.inheritsLoose,o=e.createClass},function(e){c=e.default}],execute:function(){t._RF.push({},"291e6FNdCZGTaW2jRycTMky","ResourceManager",void 0);e("default",function(e){function t(){return e.apply(this,arguments)||this}return u(t,e),t.prototype.loadDir=function(e,t){return void 0===t&&(t=r),new Promise((function(r,u){n.loadDir(e,t,(function(e,t){e?u(e):r(t)}))}))},o(t,null,[{key:"Instance",get:function(){return e.GetInstance.call(this)}}]),t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesFourSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./SpikesSubStateMachine.ts"],(function(e){"use strict";var t,s,n,i,u;return{setters:[function(e){t=e.cclegacy},function(e){s=e.inheritsLoose},function(e){n=e.SPIKES_COUNT_ENUM},function(e){i=e.default},function(e){u=e.default}],execute:function(){t._RF.push({},"2bc45DhrlZGe6SP27C34FK4","SpikesFourSubStateMachine",void 0);var a="texture/spikes/spikesfour";e("default",function(e){function t(t){var s;return(s=e.call(this,t)||this).stateMachines.set(n.ZERO,new i(t,a+"/zero")),s.stateMachines.set(n.ONE,new i(t,a+"/one")),s.stateMachines.set(n.TWO,new i(t,a+"/two")),s.stateMachines.set(n.THREE,new i(t,a+"/three")),s.stateMachines.set(n.FOUR,new i(t,a+"/four")),s.stateMachines.set(n.FIVE,new i(t,a+"/five")),s}return s(t,e),t}(u));t._RF.pop()}}}));

System.register("chunks:///_virtual/SmokeStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./StateMachine.ts","./EntityManager.ts","./IdleSubStateMachine.ts","./DeathSubStateMachine2.ts"],(function(t){"use strict";var e,n,i,a,s,r,c,o,u,h,m,p,f;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Animation},function(t){a=t.inheritsLoose,s=t.asyncToGenerator},function(t){r=t.PARAMS_NAME_ENUM,c=t.ENTITY_STATE_ENUM},function(t){o=t.getInitParamsTrigger,u=t.getInitParamsNumber,h=t.StateMachine},function(t){m=t.EntityManager},function(t){p=t.default},function(t){f=t.default}],execute:function(){var S;e._RF.push({},"2daddaaepFDJoRZu7tu+rVW","SmokeStateMachine",void 0);var E=n.ccclass;n.property,t("SmokeStateMachine",E("SmokeStateMachine")(S=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.init=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponet=this.addComponent(i),this.initParams(),this.initStateMachine(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.initParams=function(){this.params.set(r.IDLE,o()),this.params.set(r.DIRECTION,u()),this.params.set(r.DEATH,u())},n.initStateMachine=function(){this.stateMachines.set(r.IDLE,new p(this)),this.stateMachines.set(r.DEATH,new f(this))},n.initAnimationEvent=function(){var t=this;this.animationComponet.on(i.EventType.FINISHED,(function(){var e=t.animationComponet.defaultClip.name;["idle"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(m).state=c.DEATH)}))},n.run=function(){switch(this.currentState){case this.stateMachines.get(r.IDLE):case this.stateMachines.get(r.DEATH):this.params.get(r.IDLE).value?this.currentState=this.stateMachines.get(r.IDLE):this.params.get(r.DEATH).value?this.currentState=this.stateMachines.get(r.DEATH):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(r.IDLE)}},e}(h))||S);e._RF.pop()}}}));

System.register("chunks:///_virtual/level2.ts",["cc","./index2.ts"],(function(L){"use strict";var e,t,O,s,c;return{setters:[function(L){e=L.cclegacy},function(L){t=L.TILE_TYPE_ENUM,O=L.DIRECTION_ENUM,s=L.ENTITY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"35b78hvbCBJsab8QSgs4/i2","level2",void 0);var r=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:19,type:t.CLIFF_RIGHT}]],y={x:2,y:0,direction:O.BOTTOM,state:s.IDLE,type:c.PLAYER},p=[{x:3,y:2,direction:O.TOP,state:s.IDLE,type:c.SKELETON_WOODEN},{x:4,y:3,direction:O.TOP,state:s.IDLE,type:c.SKELETON_WOODEN}],_={x:5,y:3,direction:O.LEFT,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:y,enemies:p,spikes:[],bursts:[],door:_});e._RF.pop()}}}));

System.register("chunks:///_virtual/level17.ts",["cc","./index2.ts"],(function(t){"use strict";var e,L,y,O,c;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,y=t.DIRECTION_ENUM,O=t.ENTITY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"372cctagexP+JRZydPBsZva","level17",void 0);var s=[[{src:20,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:13,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:15,type:L.WALL_RIGHT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:21,type:L.WALL_ROW},{src:19,type:L.CLIFF_RIGHT}]],p={x:7,y:7,direction:y.LEFT,state:O.IDLE,type:c.PLAYER},r=[{x:2,y:1,direction:y.BOTTOM,state:O.IDLE,type:c.SKELETON_WOODEN},{x:2,y:4,direction:y.RIGHT,state:O.IDLE,type:c.SKELETON_WOODEN}],R=[{x:1,y:3,type:c.SPIKES_TWO,count:0},{x:3,y:3,type:c.SPIKES_TWO,count:0},{x:4,y:1,type:c.SPIKES_TWO,count:0},{x:4,y:4,type:c.SPIKES_TWO,count:0},{x:4,y:6,type:c.SPIKES_TWO,count:0},{x:5,y:3,type:c.SPIKES_TWO,count:0},{x:6,y:2,type:c.SPIKES_TWO,count:0},{x:6,y:6,type:c.SPIKES_TWO,count:0}],E=[{x:1,y:6,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:2,y:6,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:3,y:6,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:4,y:2,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:4,y:5,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:5,y:4,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:5,y:5,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:6,y:5,state:O.IDLE,type:c.BURST,direction:y.TOP}],F={x:0,y:1,direction:y.LEFT,state:O.IDLE,type:c.DOOR};t("default",{mapInfo:s,player:p,enemies:r,spikes:R,bursts:E,door:F});e._RF.pop()}}}));

System.register("chunks:///_virtual/BurstManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./TileManager.ts","./EntityManager.ts","./EventManager.ts","./DataManager.ts","./BurstStateMachine.ts"],(function(t){"use strict";var n,e,s,r,i,a,o,u,c,h,f,p,E;return{setters:[function(t){n=t.cclegacy,e=t._decorator,s=t.UITransform},function(t){r=t.inheritsLoose,i=t.asyncToGenerator},function(t){a=t.EVENT_ENUM,o=t.ENTITY_STATE_ENUM},function(t){u=t.TILE_WIDTH,c=t.TILE_HEIGH},function(t){h=t.EntityManager},function(t){f=t.default},function(t){p=t.default},function(t){E=t.BurstStateMachine}],execute:function(){var T;n._RF.push({},"3806eRh6yFGxoTCvzAPJ9+a","BurstManager",void 0);var y=e.ccclass;e.property,t("BurstManager",y("BurstnManager")(T=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var e=n.prototype;return e.init=function(){var n=i(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.fsm=this.addComponent(E),n.next=3,this.fsm.init();case 3:t.prototype.init.call(this,e),this.getComponent(s).setContentSize(u,c),f.Instance.on(a.PLAYER_MOVE_END,this.onBurst,this);case 7:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),e.onDestroy=function(){t.prototype.onDestroy.call(this),f.Instance.off(a.PLAYER_MOVE_END,this.onBurst)},e.update=function(){this.node.setPosition(this.x*u,-this.y*c)},e.onBurst=function(){if(this.state!==o.DEATH&&p.Instance.player){var t=p.Instance.player,n=t.x,e=t.y;this.x===n&&this.y===e&&this.state===o.IDLE?this.state=o.ATTACK:this.state===o.ATTACK&&(this.state=o.DEATH,this.x===n&&this.y===e&&f.Instance.emit(a.ATTACK_PLAYER,o.AIRDEATH))}},n}(h))||T);n._RF.pop()}}}));

System.register("chunks:///_virtual/level8.ts",["cc","./index2.ts"],(function(l){"use strict";var t,e,n,y,s;return{setters:[function(l){t=l.cclegacy},function(l){e=l.TILE_TYPE_ENUM,n=l.DIRECTION_ENUM,y=l.ENTITY_STATE_ENUM,s=l.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"38578097UVESLjZdLEAavy2","level8",void 0);var c=[[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:20,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:21,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:24,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],r={x:1,y:7,direction:n.TOP,state:y.IDLE,type:s.PLAYER},p=[{x:8,y:1,direction:n.LEFT,state:y.IDLE,type:s.SKELETON_WOODEN}],u=[{x:1,y:2,state:y.IDLE,type:s.BURST,direction:n.TOP},{x:1,y:5,state:y.IDLE,type:s.BURST,direction:n.TOP},{x:1,y:6,state:y.IDLE,type:s.BURST,direction:n.TOP},{x:2,y:1,state:y.IDLE,type:s.BURST,direction:n.TOP},{x:3,y:1,state:y.IDLE,type:s.BURST,direction:n.TOP},{x:4,y:1,state:y.IDLE,type:s.BURST,direction:n.TOP},{x:5,y:1,state:y.IDLE,type:s.BURST,direction:n.TOP},{x:6,y:1,state:y.IDLE,type:s.BURST,direction:n.TOP},{x:6,y:2,state:y.IDLE,type:s.BURST,direction:n.TOP}],L={x:9,y:1,direction:n.LEFT,state:y.IDLE,type:s.DOOR};l("default",{mapInfo:c,player:r,enemies:p,spikes:[],bursts:u,door:L});t._RF.pop()}}}));

System.register("chunks:///_virtual/BlockBackSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,c,a,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){c=t.DIRECTION_ENUM},function(t){a=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"3acc7pAt5hGeqtEFafEpuGX","BlockBackSubStateMachine",void 0);var i="texture/player/blockback";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(c.TOP,new a(e,i+"/top")),n.stateMachines.set(c.BOTTOM,new a(e,i+"/bottom")),n.stateMachines.set(c.LEFT,new a(e,i+"/left")),n.stateMachines.set(c.RIGHT,new a(e,i+"/right")),n}return n(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/IdleSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,a,i,s,o,r;return{setters:[function(t){e=t.cclegacy,n=t.AnimationClip},function(t){a=t.inheritsLoose},function(t){i=t.DIRECTION_ENUM},function(t){s=t.default,o=t.ANIMATION_SPEED},function(t){r=t.default}],execute:function(){e._RF.push({},"3b09eywaH5OA6EJvVnmt6ch","IdleSubStateMachine",void 0);var c="texture/smoke/idle";t("default",function(t){function e(e){var a;return(a=t.call(this,e)||this).stateMachines.set(i.TOP,new s(e,c+"/top",n.WrapMode.Normal,o/1.5)),a.stateMachines.set(i.BOTTOM,new s(e,c+"/bottom",n.WrapMode.Normal,o/1.5)),a.stateMachines.set(i.LEFT,new s(e,c+"/left",n.WrapMode.Normal,o/1.5)),a.stateMachines.set(i.RIGHT,new s(e,c+"/right",n.WrapMode.Normal,o/1.5)),a}return a(e,t),e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/BlockLeftSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,c,s,i;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){c=t.DIRECTION_ENUM},function(t){s=t.default},function(t){i=t.default}],execute:function(){e._RF.push({},"3c888Sj2exN2K6P3/zVlJd7","BlockLeftSubStateMachine",void 0);var a="texture/player/blockleft";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(c.TOP,new s(e,a+"/top")),n.stateMachines.set(c.BOTTOM,new s(e,a+"/bottom")),n.stateMachines.set(c.LEFT,new s(e,a+"/left")),n.stateMachines.set(c.RIGHT,new s(e,a+"/right")),n}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/ShakeManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./EventManager.ts"],(function(t){"use strict";var i,o,s,e,n,h,a,r,d,l;return{setters:[function(t){i=t.cclegacy,o=t._decorator,s=t.game,e=t.Component},function(t){n=t.inheritsLoose,h=t.defineProperty,a=t.assertThisInitialized},function(t){r=t.EVENT_ENUM,d=t.SHAKE_TYPE_ENUM},function(t){l=t.default}],execute:function(){var c;i._RF.push({},"4027aUdTeVEiIBTeTbIdGgn","ShakeManager",void 0);var u=o.ccclass;o.property,t("ShakeManager",u("ShakeManager")(c=function(t){function i(){for(var i,o=arguments.length,s=new Array(o),e=0;e<o;e++)s[e]=arguments[e];return i=t.call.apply(t,[this].concat(s))||this,h(a(i),"isShakeing",!1),h(a(i),"oldTime",void 0),h(a(i),"type",void 0),h(a(i),"oldPos",{x:0,y:0}),i}n(i,t);var o=i.prototype;return o.onLoad=function(){l.Instance.on(r.SCREEN_SHAKE,this.onShake,this)},o.onDestroy=function(){l.Instance.off(r.SCREEN_SHAKE,this.onShake)},o.stop=function(){this.isShakeing=!1},o.onShake=function(t){this.isShakeing||(this.type=t,this.oldTime=s.totalTime,this.isShakeing=!0,this.oldPos.x=this.node.position.x,this.oldPos.y=this.node.position.y)},o.update=function(){if(this.isShakeing){var t=(s.totalTime-this.oldTime)/1e3,i=16*Math.sin(12*Math.PI*t);(this.type=d.TOP)?this.node.setPosition(this.oldPos.x,this.oldPos.y-i):(this.type=d.BOTTOM)?this.node.setPosition(this.oldPos.x,this.oldPos.y+i):(this.type=d.LEFT)?this.node.setPosition(this.oldPos.x-i,this.oldPos.y):(this.type=d.RIGHT)&&this.node.setPosition(this.oldPos.x+i,this.oldPos.y),t>.2&&(this.isShakeing=!1,this.node.setPosition(this.oldPos.x,this.oldPos.y))}},i}(e))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/SubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,n,r,c;return{setters:[function(t){e=t.cclegacy,n=t._decorator},function(t){r=t.createClass,c=t.defineProperty}],execute:function(){e._RF.push({},"412ebG5LUZKEpOKp9Mb4iLe","SubStateMachine",void 0);n.ccclass,n.property,t("SubStateMachine",function(){function t(t){c(this,"_currentState",null),c(this,"stateMachines",new Map),this.fsm=t}return r(t,[{key:"currentState",get:function(){return this._currentState},set:function(t){this._currentState=t,this._currentState.run()}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/level15.ts",["cc","./index2.ts"],(function(L){"use strict";var t,e,s,c,y;return{setters:[function(L){t=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,s=L.DIRECTION_ENUM,c=L.ENTITY_STATE_ENUM,y=L.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"422fdXgMIxLq4Jojs/AQZlK","level15",void 0);var r=[[{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:22,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:25,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_RIGHT_TOP},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:1,type:e.FLOOR},{src:22,type:e.WALL_ROW},{src:28,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:15,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}]],O={x:0,y:1,direction:s.RIGHT,state:c.IDLE,type:y.PLAYER},p=[{x:2,y:4,direction:s.TOP,state:c.IDLE,type:y.SKELETON_WOODEN},{x:4,y:6,direction:s.TOP,state:c.IDLE,type:y.SKELETON_WOODEN}],l=[{x:1,y:2,type:y.SPIKES_THREE,count:0},{x:2,y:2,type:y.SPIKES_THREE,count:0},{x:2,y:6,type:y.SPIKES_TWO,count:0}],_={x:7,y:7,direction:s.LEFT,state:c.IDLE,type:y.DOOR};L("default",{mapInfo:r,player:O,enemies:p,spikes:l,bursts:[],door:_});t._RF.pop()}}}));

System.register("chunks:///_virtual/level18.ts",["cc","./index2.ts"],(function(t){"use strict";var e,L,s,c,y;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,s=t.DIRECTION_ENUM,c=t.ENTITY_STATE_ENUM,y=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"48571NF8e5G5oTQS2OWeD9s","level18",void 0);var r=[[{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:13,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:13,type:L.WALL_LEFT_BOTTOM},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:15,type:L.WALL_RIGHT_TOP},{src:13,type:L.WALL_LEFT_BOTTOM},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_COLUMN},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:null,type:null},{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:21,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],p={x:3,y:8,direction:s.LEFT,state:c.IDLE,type:y.PLAYER},O=[{x:1,y:1,direction:s.BOTTOM,state:c.IDLE,type:y.SKELETON_WOODEN},{x:3,y:2,direction:s.BOTTOM,state:c.IDLE,type:y.SKELETON_WOODEN}],l=[{x:1,y:4,type:y.SPIKES_TWO,count:0},{x:1,y:6,type:y.SPIKES_TWO,count:0},{x:1,y:8,type:y.SPIKES_FOUR,count:0}],_=[{x:1,y:5,state:c.IDLE,type:y.BURST,direction:s.TOP},{x:2,y:9,state:c.IDLE,type:y.BURST,direction:s.TOP}],n={x:5,y:2,direction:s.LEFT,state:c.IDLE,type:y.DOOR};t("default",{mapInfo:r,player:p,enemies:O,spikes:l,bursts:_,door:n});e._RF.pop()}}}));

System.register("chunks:///_virtual/DeathSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,s,a,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){s=t.DIRECTION_ENUM},function(t){a=t.default},function(t){c=t.default}],execute:function(){e._RF.push({},"48ceb/s4SNPSo/aVBqtdcmK","DeathSubStateMachine",void 0);var i="texture/door/death";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new a(e,""+i)),n.stateMachines.set(s.BOTTOM,new a(e,""+i)),n.stateMachines.set(s.LEFT,new a(e,""+i)),n.stateMachines.set(s.RIGHT,new a(e,""+i)),n}return n(e,t),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/StateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts"],(function(t){"use strict";var e,r,a,n,i,s,u,o,c;return{setters:[function(t){e=t.cclegacy,r=t._decorator,a=t.Component},function(t){n=t.inheritsLoose,i=t.defineProperty,s=t.assertThisInitialized,u=t.createForOfIteratorHelperLoose,o=t.createClass},function(t){c=t.FSM_PARAMS_TYPE_ENUM}],execute:function(){var p;e._RF.push({},"4922fQWeoRNTb6Y1FQz/pNQ","StateMachine",void 0);var h=r.ccclass;r.property,t("getInitParamsTrigger",(function(){return{type:c.TRIGGER,value:!1}})),t("getInitParamsNumber",(function(){return{type:c.NUMBER,value:0}})),t("StateMachine",h("StateMachine")(p=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,i(s(e),"_currentState",null),i(s(e),"params",new Map),i(s(e),"stateMachines",new Map),i(s(e),"animationComponet",void 0),i(s(e),"waitingList",[]),e}n(e,t);var r=e.prototype;return r.getParams=function(t){if(this.params.has(t))return this.params.get(t).value},r.setParams=function(t,e){this.params.has(t)&&(this.params.get(t).value=e,this.run(),this.resetTrigger())},r.resetTrigger=function(){for(var t,e=u(this.params);!(t=e()).done;){var r=t.value,a=(r[0],r[1]);a.type===c.TRIGGER&&(a.value=!1)}},o(e,[{key:"currentState",get:function(){return this._currentState},set:function(t){this._currentState=t,this._currentState.run()}}]),e}(a))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/level5.ts",["cc","./index2.ts"],(function(e){"use strict";var t,L,s,c,r;return{setters:[function(e){t=e.cclegacy},function(e){L=e.TILE_TYPE_ENUM,s=e.DIRECTION_ENUM,c=e.ENTITY_STATE_ENUM,r=e.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"4e644FApHpPKoxbUdVuR4j1","level5",void 0);var p=[[{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:20,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:21,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:21,type:L.WALL_ROW},{src:19,type:L.CLIFF_RIGHT}]],y={x:1,y:3,direction:s.TOP,state:c.IDLE,type:r.PLAYER},E=[{x:5,y:1,direction:s.LEFT,state:c.IDLE,type:r.SKELETON_WOODEN}],_={x:6,y:1,direction:s.LEFT,state:c.IDLE,type:r.DOOR};e("default",{mapInfo:p,player:y,enemies:E,spikes:[],bursts:[],door:_});t._RF.pop()}}}));

System.register("chunks:///_virtual/DeathSubStateMachine2.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,s,a,i;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){s=t.DIRECTION_ENUM},function(t){a=t.default},function(t){i=t.default}],execute:function(){e._RF.push({},"51ba909fopKC5SXqEg0ZgjC","DeathSubStateMachine",void 0);var c="texture/door/death";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new a(e,""+c)),n.stateMachines.set(s.BOTTOM,new a(e,""+c)),n.stateMachines.set(s.LEFT,new a(e,""+c)),n.stateMachines.set(s.RIGHT,new a(e,""+c)),n}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/BlockTurnLeftSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,s,c,i;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){s=t.DIRECTION_ENUM},function(t){c=t.default},function(t){i=t.default}],execute:function(){e._RF.push({},"53b75y9M/NApLDz+58bFt/5","BlockTurnLeftSubStateMachine",void 0);var u="texture/player/blockturnleft";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new c(e,u+"/top")),n.stateMachines.set(s.BOTTOM,new c(e,u+"/bottom")),n.stateMachines.set(s.LEFT,new c(e,u+"/left")),n.stateMachines.set(s.RIGHT,new c(e,u+"/right")),n}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/level10.ts",["cc","./index2.ts"],(function(L){"use strict";var t,e,O,s,c;return{setters:[function(L){t=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,O=L.DIRECTION_ENUM,s=L.ENTITY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"54ca6BC6m1HC4G7lCJ4negm","level10",void 0);var r=[[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:25,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:20,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:24,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:21,type:e.WALL_RIGHT_TOP},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],y={x:1,y:7,direction:O.TOP,state:s.IDLE,type:c.PLAYER},p=[{x:1,y:3,direction:O.BOTTOM,state:s.IDLE,type:c.SKELETON_WOODEN},{x:2,y:4,direction:O.BOTTOM,state:s.IDLE,type:c.SKELETON_IRON},{x:5,y:5,direction:O.LEFT,state:s.IDLE,type:c.SKELETON_WOODEN}],R=[{x:4,y:3,type:c.SPIKES_THREE,count:0}],_=[{x:3,y:4,state:s.IDLE,type:c.BURST,direction:O.TOP},{x:3,y:5,state:s.IDLE,type:c.BURST,direction:O.TOP}],E={x:6,y:1,direction:O.LEFT,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:y,enemies:p,spikes:R,bursts:_,door:E});t._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc"],(function(E){"use strict";var T;return{setters:[function(E){T=E.cclegacy}],execute:function(){var O,R,_,L,N,I,S,A,U,K,C,P,M,F;E({CONTROLLER_ENUM:void 0,DIRECTION_ENUM:void 0,DIRECTION_ORDER_ENUM:void 0,ENTITY_STATE_ENUM:void 0,ENTITY_TYPE_ENUM:void 0,EVENT_ENUM:void 0,FSM_PARAMS_TYPE_ENUM:void 0,PARAMS_NAME_ENUM:void 0,SCENE_ENUM:void 0,SHAKE_TYPE_ENUM:void 0,SPIKES_COUNT_ENUM:void 0,SPIKES_COUNT_MAP_NUMBER_ENUM:void 0,SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM:void 0,TILE_TYPE_ENUM:void 0}),T._RF.push({},"54e5e+tyoVDe4qfAYC+4Tu7","index",void 0),function(E){E.WALL_ROW="WALL_ROW",E.WALL_COLUMN="WALL_COLUMN",E.WALL_LEFT_TOP="WALL_LEFT_TOP",E.WALL_LEFT_BOTTOM="WALL_LEFT_BOTTOM",E.WALL_RIGHT_TOP="WALL_RIGHT_TOP",E.WALL_RIGHT_BOTTOM="WALL_RIGHT_BOTTOM",E.CLIFF_LEFT="CLIFF_LEFT",E.CLIFF_CENTER="CLIFF_CENTER",E.CLIFF_RIGHT="CLIFF_RIGHT",E.FLOOR="FLOOR"}(O||(O=E("TILE_TYPE_ENUM",{}))),function(E){E.NEXT_LEVEL="NEXT_LEVEL",E.PLAYER_CTRL="PLAYER_CTRL",E.PLAYER_MOVE_END="PLAYER_MOVE_END",E.PLAYER_BORN="PLAYER_BORN",E.ATTACK_PLAYER="ATTACK_PLAYER",E.ATTACK_ENEMY="ATTACK_ENEMY",E.DOOR_OPEN="DOOR_OPEN",E.SHOW_SMOKE="SHOW_SMOKE",E.SCREEN_SHAKE="SCREEN_SHAKE",E.RECORD_STEP="RECORD_STEP",E.REVOKE_STEP="REVOKE_STEP",E.RESTART_LEVEL="RESTART_LEVEL",E.OUT_BATTLE="OUT_BATTLE"}(R||(R=E("EVENT_ENUM",{}))),function(E){E.TOP="TOP",E.BOTTOM="BOTTOM",E.LEFT="LEFT",E.RIGHT="RIGHT",E.TURNLEFT="TURNLEFT",E.TURNRIGHT="TURNRIGHT"}(_||(_=E("CONTROLLER_ENUM",{}))),function(E){E.NUMBER="NUMBER",E.TRIGGER="TRIGGER"}(L||(L=E("FSM_PARAMS_TYPE_ENUM",{}))),function(E){E.IDLE="IDLE",E.TURNLEFT="TURNLEFT",E.TURNRIGHT="TURNRIGHT",E.BLOCKFRONT="BLOCKFRONT",E.BLOCKBACK="BLOCKBACK",E.BLOCKLEFT="BLOCKLEFT",E.BLOCKRIGHT="BLOCKRIGHT",E.BLOCKTURNLEFT="BLOCKTURNLEFT",E.BLOCKTURNRIGHT="BLOCKTURNRIGHT",E.DIRECTION="DIRECTION",E.ATTACK="ATTACK",E.DEATH="DEATH",E.AIRDEATH="AIRDEATH",E.SPIKES_CUR_COUNT="SPIKES_CUR_COUNT",E.SPIKES_TOTAL_COUNT="SPIKES_TOTAL_COUNT"}(N||(N=E("PARAMS_NAME_ENUM",{}))),function(E){E.TOP="TOP",E.BOTTOM="BOTTOM",E.LEFT="LEFT",E.RIGHT="RIGHT"}(I||(I=E("DIRECTION_ENUM",{}))),function(E){E.IDLE="IDLE",E.BLOCKFRONT="BLOCKFRONT",E.BLOCKTURNLEFT="BLOCKTURNLEFT",E.TURNLEFT="TURNLEFT",E.TURNRIGHT="TURNRIGHT",E.ATTACK="ATTACK",E.DEATH="DEATH",E.AIRDEATH="AIRDEATH",E.BLOCKBACK="BLOCKBACK",E.BLOCKRIGHT="BLOCKRIGHT",E.BLOCKLEFT="BLOCKLEFT",E.BLOCKTURNRIGHT="BLOCKTURNRIGHT"}(S||(S=E("ENTITY_STATE_ENUM",{}))),function(E){E[E.TOP=0]="TOP",E[E.BOTTOM=1]="BOTTOM",E[E.LEFT=2]="LEFT",E[E.RIGHT=3]="RIGHT"}(A||(A=E("DIRECTION_ORDER_ENUM",{}))),function(E){E.PLAYER="PLAYER",E.SKELETON_WOODEN="SKELETON_WOODEN",E.SKELETON_IRON="SKELETON_IRON",E.DOOR="DOOR",E.BURST="BURST",E.SPIKES_ONE="SPIKES_ONE",E.SPIKES_TWO="SPIKES_TWO",E.SPIKES_THREE="SPIKES_THREE",E.SPIKES_FOUR="SPIKES_FOUR",E.SMOKE="SMOKE"}(U||(U=E("ENTITY_TYPE_ENUM",{}))),function(E){E[E.SPIKES_ONE=2]="SPIKES_ONE",E[E.SPIKES_TWO=3]="SPIKES_TWO",E[E.SPIKES_THREE=4]="SPIKES_THREE",E[E.SPIKES_FOUR=5]="SPIKES_FOUR"}(K||(K=E("SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM",{}))),function(E){E.ZERO="ZERO",E.ONE="ONE",E.TWO="TWO",E.THREE="THREE",E.FOUR="FOUR",E.FIVE="FIVE"}(C||(C=E("SPIKES_COUNT_ENUM",{}))),function(E){E[E.ZERO=0]="ZERO",E[E.ONE=1]="ONE",E[E.TWO=2]="TWO",E[E.THREE=3]="THREE",E[E.FOUR=4]="FOUR",E[E.FIVE=5]="FIVE"}(P||(P=E("SPIKES_COUNT_MAP_NUMBER_ENUM",{}))),function(E){E.loading="loading",E.start="start",E.battle="battle"}(M||(M=E("SCENE_ENUM",{}))),function(E){E.TOP="TOP",E.BOTTOM="BOTTOM",E.LEFT="LEFT ",E.RIGHT="RIGHT"}(F||(F=E("SHAKE_TYPE_ENUM",{}))),T._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.cclegacy},function(n){e=n.defineProperty}],execute:function(){t._RF.push({},"54fc9UE4+RM14w0AargOCnM","Singleton",void 0);var i=n("default",function(){function n(){}return n.GetInstance=function(){return null===this._instance&&(this._instance=new this),this._instance},n}());e(i,"_instance",null),t._RF.pop()}}}));

System.register("chunks:///_virtual/BattleManager.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./TileManager.ts","./EventManager.ts","./DataManager.ts","./SpikesManager.ts","./BurstManager.ts","./ShakeManager.ts","./TileMapManager.ts","./index3.ts","./PlayerManager.ts","./WoodenSkeletonManager.ts","./DoorManager.ts","./IronSkeletonManager.ts","./SmokeManager.ts","./FadeManager.ts"],(function(e){"use strict";var t,n,r,a,s,o,i,c,u,p,l,f,d,I,h,g,m,y,v,x,E,k,R,L,M,T,S,_;return{setters:[function(e){t=e.cclegacy,n=e._decorator,r=e.Component,a=e.director},function(e){s=e.createUINode},function(e){o=e.inheritsLoose,i=e.defineProperty,c=e.assertThisInitialized,u=e.asyncToGenerator},function(e){p=e.EVENT_ENUM,l=e.ENTITY_STATE_ENUM,f=e.SCENE_ENUM,d=e.ENTITY_TYPE_ENUM},function(e){I=e.TILE_WIDTH,h=e.TILE_HEIGH},function(e){g=e.default},function(e){m=e.default},function(e){y=e.SpikesManager},function(e){v=e.BurstManager},function(e){x=e.ShakeManager},function(e){E=e.TileMapManager},function(e){k=e.default},function(e){R=e.PlayerManager},function(e){L=e.WoodenSkeletonManager},function(e){M=e.DoorManager},function(e){T=e.IronSkeletonManager},function(e){S=e.SmokeManager},function(e){_=e.default}],execute:function(){var P;t._RF.push({},"584a8i89dxMxKKIgQflNGGz","BattleManager",void 0);var w=n.ccclass;n.property,e("BattleManager",w("BattleManager")(P=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(c(t),"level",void 0),i(c(t),"stage",void 0),i(c(t),"smokeLayer",void 0),i(c(t),"inited",!1),i(c(t),"initLevel",u(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=k["level"+m.Instance.levelIndex])){e.next=21;break}if(!t.inited){e.next=7;break}return e.next=5,_.Instance.fadeIn();case 5:e.next=9;break;case 7:return e.next=9,_.Instance.mask();case 9:return t.clearLevel(),t.level=n,m.Instance.mapInfo=t.level.mapInfo,m.Instance.mapRowCount=t.level.mapInfo.length,m.Instance.mapColumnCount=t.level.mapInfo[0].length,e.next=16,Promise.all([t.generateTileMap(),t.generateBursts(),t.generateSpikes(),t.generateEnemies(),t.generateSmokeLayer(),t.generatePlayer(),t.generateDoor()]);case 16:return e.next=18,_.Instance.fadeOut();case 18:t.inited=!0,e.next=22;break;case 21:t.outBattle();case 22:case"end":return e.stop()}}),e)})))),i(c(t),"nextLevel",u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.Instance.levelIndex++,t.initLevel();case 2:case"end":return e.stop()}}),e)})))),i(c(t),"clearLevel",u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stage.destroyAllChildren(),m.Instance.reset();case 2:case"end":return e.stop()}}),e)})))),t}o(t,e);var n=t.prototype;return n.onLoad=function(){m.Instance.levelIndex=1,g.Instance.on(p.NEXT_LEVEL,this.nextLevel,this),g.Instance.on(p.PLAYER_MOVE_END,this.checkArrived,this),g.Instance.on(p.SHOW_SMOKE,this.generateSmoke,this),g.Instance.on(p.RECORD_STEP,this.record,this),g.Instance.on(p.REVOKE_STEP,this.revoke,this),g.Instance.on(p.RESTART_LEVEL,this.initLevel,this),g.Instance.on(p.OUT_BATTLE,this.outBattle,this)},n.onDestroy=function(){g.Instance.off(p.NEXT_LEVEL,this.nextLevel),g.Instance.off(p.PLAYER_MOVE_END,this.checkArrived),g.Instance.off(p.SHOW_SMOKE,this.generateSmoke),g.Instance.off(p.RECORD_STEP,this.record),g.Instance.off(p.REVOKE_STEP,this.revoke),g.Instance.on(p.RESTART_LEVEL,this.initLevel),g.Instance.on(p.OUT_BATTLE,this.outBattle)},n.start=function(){this.generateStage(),this.initLevel()},n.outBattle=function(){var e=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.Instance.fadeIn();case 2:a.loadScene(f.start);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.generateStage=function(){this.stage=s(),this.stage.setParent(this.node),this.stage.addComponent(x)},n.generateSmoke=function(){var e=u(regeneratorRuntime.mark((function e(t,n,r){var a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=m.Instance.smokes.find((function(e){return e.state===l.DEATH})))){e.next=5;break}a.x=t,a.y=n,a.direction=r,a.state=l.IDLE,a.node.setPosition(t*I-1.5*I,-n*h+1.5*h),e.next=11;break;case 5:return(o=s()).setParent(this.smokeLayer),i=o.addComponent(S),e.next=10,i.init({x:t,y:n,direction:r,state:l.IDLE,type:d.SMOKE});case 10:m.Instance.smokes.push(i);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.generateDoor=function(){var e=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=s()).setParent(this.stage),n=t.addComponent(M),e.next=5,n.init(this.level.door);case 5:m.Instance.door=n;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generateBursts=function(){var e=u(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<this.level.bursts.length;++n)r=this.level.bursts[n],(a=s()).setParent(this.stage),o=a.addComponent(v),t.push(o.init(r)),m.Instance.bursts.push(o);return e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generateSpikes=function(){var e=u(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<this.level.spikes.length;++n)r=this.level.spikes[n],(a=s()).setParent(this.stage),o=a.addComponent(y),t.push(o.init(r)),m.Instance.spikes.push(o);return e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generateTileMap=function(){var e=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=s()).setParent(this.stage),n=t.addComponent(E),e.next=5,n.init();case 5:this.adaptPos();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generateSmokeLayer=function(){var e=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.smokeLayer=s(),this.smokeLayer.setParent(this.stage);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generatePlayer=function(){var e=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=s()).setParent(this.stage),n=t.addComponent(R),e.next=5,n.init(this.level.player);case 5:m.Instance.player=n,g.Instance.emit(p.PLAYER_BORN,!0);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generateEnemies=function(){var e=u(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<this.level.enemies.length;++n)r=this.level.enemies[n],(a=s()).setParent(this.stage),o=r.type===d.SKELETON_WOODEN?L:T,i=a.addComponent(o),t.push(i.init(r)),m.Instance.enemies.push(i);return e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.checkArrived=function(){if(m.Instance.player&&m.Instance.door){var e=m.Instance.player,t=e.x,n=e.y,r=m.Instance.door,a=r.x,s=r.y,o=r.state;t===a&&n===s&&o===l.DEATH&&g.Instance.emit(p.NEXT_LEVEL)}},n.adaptPos=function(){var e=m.Instance,t=e.mapRowCount,n=e.mapColumnCount,r=I*t/2,a=h*n/2+80;this.stage.getComponent(x).stop(),this.stage.setPosition(-r,a)},n.record=function(){var e={player:{x:m.Instance.player.x,y:m.Instance.player.y,direction:m.Instance.player.direction,state:m.Instance.player.state===l.IDLE||m.Instance.player.state===l.DEATH||m.Instance.player.state===l.AIRDEATH?m.Instance.player.state:l.IDLE,type:m.Instance.player.type},door:{x:m.Instance.door.x,y:m.Instance.door.y,direction:m.Instance.door.direction,state:m.Instance.door.state,type:m.Instance.door.type},enemies:m.Instance.enemies.map((function(e){return{x:e.x,y:e.y,direction:e.direction,state:e.state,type:e.type}})),bursts:m.Instance.bursts.map((function(e){return{x:e.x,y:e.y,direction:e.direction,state:e.state,type:e.type}})),spikes:m.Instance.spikes.map((function(e){return{x:e.x,y:e.y,count:e.count,type:e.type}}))};m.Instance.records.push(e)},n.revoke=function(){var e=m.Instance.records.pop();if(e){m.Instance.player.x=m.Instance.player.targetX=e.player.x,m.Instance.player.y=m.Instance.player.targetY=e.player.y,m.Instance.player.state=e.player.state,m.Instance.player.direction=e.player.direction,m.Instance.door.x=e.door.x,m.Instance.door.y=e.door.y,m.Instance.door.state=e.door.state,m.Instance.door.direction=e.door.direction;for(var t=0;t<m.Instance.enemies.length;++t){var n=e.enemies[t];m.Instance.enemies[t].x=n.x,m.Instance.enemies[t].y=n.y,m.Instance.enemies[t].direction=n.direction,m.Instance.enemies[t].state=n.state}for(var r=0;r<m.Instance.bursts.length;++r){var a=e.bursts[r];m.Instance.bursts[r].x=a.x,m.Instance.bursts[r].y=a.y,m.Instance.bursts[r].direction=a.direction,m.Instance.bursts[r].state=a.state}for(var s=0;s<m.Instance.spikes.length;++s){var o=e.spikes[s];m.Instance.spikes[s].x=o.x,m.Instance.spikes[s].y=o.y,m.Instance.spikes[s].count=o.count,m.Instance.spikes[s].type=o.type}}},t}(r))||P);t._RF.pop()}}}));

System.register("chunks:///_virtual/DirectionSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./SubStateMachine.ts"],(function(t){"use strict";var e,n,i,c,u;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.PARAMS_NAME_ENUM,c=t.DIRECTION_ORDER_ENUM},function(t){u=t.SubStateMachine}],execute:function(){e._RF.push({},"5c5abgz5pJMXq/M0TyqVAld","DirectionSubStateMachine",void 0);t("default",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.run=function(){var t=this.fsm.getParams(i.DIRECTION);this.currentState=this.stateMachines.get(c[t])},e}(u));e._RF.pop()}}}));

System.register("chunks:///_virtual/level7.ts",["cc","./index2.ts"],(function(L){"use strict";var O,t,e,c,s;return{setters:[function(L){O=L.cclegacy},function(L){t=L.TILE_TYPE_ENUM,e=L.DIRECTION_ENUM,c=L.ENTITY_STATE_ENUM,s=L.ENTITY_TYPE_ENUM}],execute:function(){O._RF.push({},"608a0op99JIJZ+w4Px5tXsO","level7",void 0);var y=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:21,type:t.WALL_RIGHT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:21,type:t.WALL_RIGHT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:19,type:t.CLIFF_RIGHT}]],r={x:2,y:7,direction:e.TOP,state:c.IDLE,type:s.PLAYER},p=[{x:2,y:2,direction:e.BOTTOM,state:c.IDLE,type:s.SKELETON_WOODEN}],_=[{x:1,y:4,type:s.SPIKES_ONE,count:0},{x:2,y:4,type:s.SPIKES_TWO,count:0},{x:3,y:4,type:s.SPIKES_TWO,count:0},{x:4,y:4,type:s.SPIKES_THREE,count:0}],T={x:2,y:0,direction:e.BOTTOM,state:c.IDLE,type:s.DOOR};L("default",{mapInfo:y,player:r,enemies:p,spikes:_,bursts:[],door:T});O._RF.pop()}}}));

System.register("chunks:///_virtual/ControllerManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./EventManager.ts"],(function(t){"use strict";var n,e,r,o,a,c;return{setters:[function(t){n=t.cclegacy,e=t._decorator,r=t.Component},function(t){o=t.inheritsLoose},function(t){a=t.EVENT_ENUM},function(t){c=t.default}],execute:function(){var i;n._RF.push({},"63215WOHTtOMbxgJp4HZJJP","ControllerManager",void 0);var l=e.ccclass;e.property,t("ControllerManager",l("ControllerManager")(i=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.handleCtrl=function(t,n){c.Instance.emit(a.PLAYER_CTRL,n)},n}(r))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/WoodenSkeletonStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./StateMachine.ts","./EntityManager.ts","./IdleSubStateMachine2.ts","./AttackSubStateMachine.ts","./DeathSubStateMachine5.ts"],(function(t){"use strict";var e,n,i,a,s,r,c,o,h,u,m,p,S,f;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Animation},function(t){a=t.inheritsLoose,s=t.asyncToGenerator},function(t){r=t.PARAMS_NAME_ENUM,c=t.ENTITY_STATE_ENUM},function(t){o=t.getInitParamsTrigger,h=t.getInitParamsNumber,u=t.StateMachine},function(t){m=t.EntityManager},function(t){p=t.default},function(t){S=t.default},function(t){f=t.default}],execute:function(){var M;e._RF.push({},"67c87IxK0JIEo1kGg77mX0U","WoodenSkeletonStateMachine",void 0);var l=n.ccclass;n.property,t("WoodenSkeletonStateMachine",l("WoodenSkeletonStateMachine")(M=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.init=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponet=this.addComponent(i),this.initParams(),this.initStateMachine(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.initParams=function(){this.params.set(r.IDLE,o()),this.params.set(r.DIRECTION,h()),this.params.set(r.ATTACK,h()),this.params.set(r.DEATH,h())},n.initStateMachine=function(){this.stateMachines.set(r.IDLE,new p(this)),this.stateMachines.set(r.ATTACK,new S(this)),this.stateMachines.set(r.DEATH,new f(this))},n.initAnimationEvent=function(){var t=this;this.animationComponet.on(i.EventType.FINISHED,(function(){var e=t.animationComponet.defaultClip.name;["attack"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(m).state=c.IDLE)}))},n.run=function(){switch(this.currentState){case this.stateMachines.get(r.IDLE):case this.stateMachines.get(r.DEATH):case this.stateMachines.get(r.ATTACK):this.params.get(r.IDLE).value?this.currentState=this.stateMachines.get(r.IDLE):this.params.get(r.ATTACK).value?this.currentState=this.stateMachines.get(r.ATTACK):this.params.get(r.DEATH).value?this.currentState=this.stateMachines.get(r.DEATH):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(r.IDLE)}},e}(u))||M);e._RF.pop()}}}));

System.register("chunks:///_virtual/IdleSubStateMachine2.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,o,i,a,s;return{setters:[function(t){e=t.cclegacy,n=t.AnimationClip},function(t){o=t.inheritsLoose},function(t){i=t.DIRECTION_ENUM},function(t){a=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"6ae4fCENnFCrpMYjtbmR/zb","IdleSubStateMachine",void 0);var c="texture/woodenskeleton/idle";t("default",function(t){function e(e){var o;return(o=t.call(this,e)||this).stateMachines.set(i.TOP,new a(e,c+"/top",n.WrapMode.Loop)),o.stateMachines.set(i.BOTTOM,new a(e,c+"/bottom",n.WrapMode.Loop)),o.stateMachines.set(i.LEFT,new a(e,c+"/left",n.WrapMode.Loop)),o.stateMachines.set(i.RIGHT,new a(e,c+"/right",n.WrapMode.Loop)),o}return o(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesTwoSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./SpikesSubStateMachine.ts"],(function(e){"use strict";var t,n,s,i,c;return{setters:[function(e){t=e.cclegacy},function(e){n=e.inheritsLoose},function(e){s=e.SPIKES_COUNT_ENUM},function(e){i=e.default},function(e){c=e.default}],execute:function(){t._RF.push({},"6c3057b/oNCCp3HkoNJvOQJ","SpikesTwoSubStateMachine",void 0);var u="texture/spikes/spikestwo";e("default",function(e){function t(t){var n;return(n=e.call(this,t)||this).stateMachines.set(s.ZERO,new i(t,u+"/zero")),n.stateMachines.set(s.ONE,new i(t,u+"/one")),n.stateMachines.set(s.TWO,new i(t,u+"/two")),n.stateMachines.set(s.THREE,new i(t,u+"/three")),n}return n(t,e),t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/TurnRightSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,i,s,u;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.DIRECTION_ENUM},function(t){s=t.default},function(t){u=t.default}],execute:function(){e._RF.push({},"6c6ffEeDI1Dh47+78fhag1M","TurnRightSubStateMachine",void 0);var a="texture/player/turnright";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new s(e,a+"/top")),n.stateMachines.set(i.BOTTOM,new s(e,a+"/bottom")),n.stateMachines.set(i.LEFT,new s(e,a+"/left")),n.stateMachines.set(i.RIGHT,new s(e,a+"/right")),n}return n(e,t),e}(u));e._RF.pop()}}}));

System.register("chunks:///_virtual/IdleSubStateMachine3.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,i,s,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.DIRECTION_ENUM},function(t){s=t.default},function(t){c=t.default}],execute:function(){e._RF.push({},"6ce37liXmtIDYX/4/w/fH3U","IdleSubStateMachine",void 0);var u="texture/door/idle";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new s(e,u+"/top")),n.stateMachines.set(i.BOTTOM,new s(e,u+"/top")),n.stateMachines.set(i.LEFT,new s(e,u+"/left")),n.stateMachines.set(i.RIGHT,new s(e,u+"/left")),n}return n(e,t),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/DrawManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,i,s,o,n,a,r,h,l,c,u,d;return{setters:[function(t){e=t.cclegacy,i=t._decorator,s=t.view,o=t.BlockInputEvents,n=t.Graphics,a=t.UITransform,r=t.Color,h=t.game,l=t.Component},function(t){c=t.inheritsLoose,u=t.defineProperty,d=t.assertThisInitialized}],execute:function(){var f;e._RF.push({},"6da53FWsoZGPIOk2X9uEwh0","DrawManager",void 0);var p,v=i.ccclass;i.property;!function(t){t.IDLE="IDLE",t.FADE_IN="FADE_IN",t.FADE_OUT="FADE_OUT"}(p||(p={}));var A=s.getVisibleSize().width,m=s.getVisibleSize().height,D=t("DEFAULT_DURATION",200);t("DrawManager",v("DrawManager")(f=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,u(d(e),"ctx",void 0),u(d(e),"state",void 0),u(d(e),"oldTime",0),u(d(e),"duration",void 0),u(d(e),"fadeResolve",void 0),u(d(e),"block",void 0),e}c(e,t);var i=e.prototype;return i.init=function(){this.block=this.addComponent(o),this.ctx=this.addComponent(n);var t=this.getComponent(a);t.setAnchorPoint(.5,.5),t.setContentSize(A,m),this.setAlpha(1)},i.setAlpha=function(t){this.ctx.clear(),this.ctx.rect(0,0,A,m),this.ctx.fillColor=new r(0,0,0,255*t),this.ctx.fill(),this.block.enabled=1===t},i.update=function(){var t=(h.totalTime-this.oldTime)/this.duration;switch(this.state){case p.FADE_IN:t<1?this.setAlpha(t):(this.setAlpha(1),this.state=p.IDLE,this.fadeResolve(null));break;case p.FADE_OUT:t<1?this.setAlpha(1-t):(this.setAlpha(0),this.state=p.IDLE,this.fadeResolve(null))}},i.fadeIn=function(t){var e=this;return void 0===t&&(t=D),this.setAlpha(0),this.duration=t,this.oldTime=h.totalTime,this.state=p.FADE_IN,new Promise((function(t){e.fadeResolve=t}))},i.fadeOut=function(t){var e=this;return void 0===t&&(t=D),this.setAlpha(1),this.duration=t,this.oldTime=h.totalTime,this.state=p.FADE_OUT,new Promise((function(t){e.fadeResolve=t}))},i.mask=function(){return this.setAlpha(1),new Promise((function(t){setTimeout(t,D)}))},e}(l))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/level13.ts",["cc","./index2.ts"],(function(t){"use strict";var e,L,s,c,r;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,s=t.DIRECTION_ENUM,c=t.ENTITY_STATE_ENUM,r=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"7ed99npf/xBm7aNjRta0xqv","level13",void 0);var y=[[{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_RIGHT_TOP},{src:14,type:L.WALL_ROW},{src:19,type:L.CLIFF_RIGHT},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],l={x:10,y:1,direction:s.LEFT,state:c.IDLE,type:r.PLAYER},p=[{x:1,y:4,direction:s.RIGHT,state:c.IDLE,type:r.SKELETON_WOODEN},{x:3,y:2,direction:s.RIGHT,state:c.IDLE,type:r.SKELETON_IRON},{x:5,y:1,direction:s.RIGHT,state:c.IDLE,type:r.SKELETON_WOODEN}],O=[{x:1,y:1,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:5,y:2,state:c.IDLE,type:r.BURST,direction:s.TOP}],n={x:1,y:6,direction:s.BOTTOM,state:c.IDLE,type:r.DOOR};t("default",{mapInfo:y,player:l,enemies:p,spikes:[],bursts:O,door:n});e._RF.pop()}}}));

System.register("chunks:///_virtual/AttackSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,s,a,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){s=t.DIRECTION_ENUM},function(t){a=t.default},function(t){c=t.default}],execute:function(){e._RF.push({},"800f07ErD9L0asAm5AYp6/l","AttackSubStateMachine",void 0);var i="texture/woodenskeleton/attack";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new a(e,i+"/top")),n.stateMachines.set(s.BOTTOM,new a(e,i+"/bottom")),n.stateMachines.set(s.LEFT,new a(e,i+"/left")),n.stateMachines.set(s.RIGHT,new a(e,i+"/right")),n}return n(e,t),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./StateMachine.ts","./BlockTurnRightSubStateMachine.ts","./BlockRightSubStateMachine.ts","./EntityManager.ts","./BlockBackSubStateMachine.ts","./BlockLeftSubStateMachine.ts","./BlockTurnLeftSubStateMachine.ts","./IdleSubStateMachine5.ts","./TurnLeftSubStateMachine.ts","./BlockFrontSubStateMachine.ts","./DeathSubStateMachine3.ts","./AttackSubStateMachine2.ts","./AirDeathSubStateMachine.ts","./TurnRightSubStateMachine.ts"],(function(t){"use strict";var e,s,a,i,n,h,c,r,u,T,o,M,L,R,g,l,S,f,m,p,C,B,E;return{setters:[function(t){e=t.cclegacy,s=t._decorator,a=t.Animation},function(t){i=t.inheritsLoose,n=t.asyncToGenerator},function(t){h=t.PARAMS_NAME_ENUM,c=t.ENTITY_STATE_ENUM},function(t){r=t.getInitParamsTrigger,u=t.getInitParamsNumber,T=t.StateMachine},function(t){o=t.default},function(t){M=t.default},function(t){L=t.EntityManager},function(t){R=t.default},function(t){g=t.default},function(t){l=t.default},function(t){S=t.default},function(t){f=t.default},function(t){m=t.default},function(t){p=t.default},function(t){C=t.default},function(t){B=t.default},function(t){E=t.default}],execute:function(){var K;e._RF.push({},"8d187FFGMBFd6zrs32WsuHB","PlayerStateMachine",void 0);var A=s.ccclass;s.property,t("PlayerStateMachine",A("PlayerStateMachine")(K=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var s=e.prototype;return s.init=function(){var t=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponet=this.addComponent(a),this.initParams(),this.initStateMachine(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.initParams=function(){this.params.set(h.IDLE,r()),this.params.set(h.TURNLEFT,r()),this.params.set(h.TURNRIGHT,r()),this.params.set(h.BLOCKFRONT,r()),this.params.set(h.BLOCKBACK,r()),this.params.set(h.BLOCKLEFT,r()),this.params.set(h.BLOCKRIGHT,r()),this.params.set(h.BLOCKTURNLEFT,r()),this.params.set(h.BLOCKTURNRIGHT,r()),this.params.set(h.DIRECTION,u()),this.params.set(h.DEATH,u()),this.params.set(h.AIRDEATH,u()),this.params.set(h.ATTACK,u())},s.initStateMachine=function(){this.stateMachines.set(h.IDLE,new S(this)),this.stateMachines.set(h.TURNLEFT,new f(this)),this.stateMachines.set(h.TURNRIGHT,new E(this)),this.stateMachines.set(h.BLOCKFRONT,new m(this)),this.stateMachines.set(h.BLOCKBACK,new R(this)),this.stateMachines.set(h.BLOCKLEFT,new g(this)),this.stateMachines.set(h.BLOCKRIGHT,new M(this)),this.stateMachines.set(h.BLOCKTURNLEFT,new l(this)),this.stateMachines.set(h.BLOCKTURNRIGHT,new o(this)),this.stateMachines.set(h.DEATH,new p(this)),this.stateMachines.set(h.AIRDEATH,new B(this)),this.stateMachines.set(h.ATTACK,new C(this))},s.initAnimationEvent=function(){var t=this;this.animationComponet.on(a.EventType.FINISHED,(function(){var e=t.animationComponet.defaultClip.name;["block","turn","attack"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(L).state=c.IDLE)}))},s.run=function(){switch(this.currentState){case this.stateMachines.get(h.TURNLEFT):case this.stateMachines.get(h.TURNRIGHT):case this.stateMachines.get(h.BLOCKFRONT):case this.stateMachines.get(h.BLOCKBACK):case this.stateMachines.get(h.BLOCKLEFT):case this.stateMachines.get(h.BLOCKRIGHT):case this.stateMachines.get(h.BLOCKTURNLEFT):case this.stateMachines.get(h.BLOCKTURNRIGHT):case this.stateMachines.get(h.DEATH):case this.stateMachines.get(h.ATTACK):case this.stateMachines.get(h.AIRDEATH):case this.stateMachines.get(h.IDLE):this.params.get(h.TURNLEFT).value?this.currentState=this.stateMachines.get(h.TURNLEFT):this.params.get(h.TURNRIGHT).value?this.currentState=this.stateMachines.get(h.TURNRIGHT):this.params.get(h.IDLE).value?this.currentState=this.stateMachines.get(h.IDLE):this.params.get(h.ATTACK).value?this.currentState=this.stateMachines.get(h.ATTACK):this.params.get(h.DEATH).value?this.currentState=this.stateMachines.get(h.DEATH):this.params.get(h.AIRDEATH).value?this.currentState=this.stateMachines.get(h.AIRDEATH):this.params.get(h.BLOCKTURNLEFT).value?this.currentState=this.stateMachines.get(h.BLOCKTURNLEFT):this.params.get(h.BLOCKTURNRIGHT).value?this.currentState=this.stateMachines.get(h.BLOCKTURNRIGHT):this.params.get(h.BLOCKFRONT).value?this.currentState=this.stateMachines.get(h.BLOCKFRONT):this.params.get(h.BLOCKBACK).value?this.currentState=this.stateMachines.get(h.BLOCKBACK):this.params.get(h.BLOCKLEFT).value?this.currentState=this.stateMachines.get(h.BLOCKLEFT):this.params.get(h.BLOCKRIGHT).value?this.currentState=this.stateMachines.get(h.BLOCKRIGHT):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(h.IDLE)}},e}(T))||K);e._RF.pop()}}}));

System.register("chunks:///_virtual/level1.ts",["cc","./index2.ts"],(function(L){"use strict";var O,e,t,s,r;return{setters:[function(L){O=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,t=L.DIRECTION_ENUM,s=L.ENTITY_STATE_ENUM,r=L.ENTITY_TYPE_ENUM}],execute:function(){O._RF.push({},"8e029ZpGzdD94QFYha+I0rx","level1",void 0);var c=[[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_RIGHT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:20,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}],[{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:16,type:e.WALL_LEFT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:20,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],p={x:2,y:8,direction:t.TOP,state:s.IDLE,type:r.PLAYER},y=[{x:7,y:6,direction:t.TOP,state:s.IDLE,type:r.SKELETON_WOODEN}],_={x:7,y:8,direction:t.BOTTOM,state:s.IDLE,type:r.DOOR};L("default",{mapInfo:c,player:p,enemies:y,spikes:[],bursts:[],door:_});O._RF.pop()}}}));

System.register("chunks:///_virtual/MenuManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./EventManager.ts"],(function(n){"use strict";var e,t,r,a,o,u;return{setters:[function(n){e=n.cclegacy,t=n._decorator,r=n.Component},function(n){a=n.inheritsLoose},function(n){o=n.EVENT_ENUM},function(n){u=n.default}],execute:function(){var c;e._RF.push({},"9376ex8WQtN16oMrZs8xmwh","MenuManager",void 0);var i=t.ccclass;t.property,n("MenuManager",i("MenuManager")(c=function(n){function e(){return n.apply(this,arguments)||this}a(e,n);var t=e.prototype;return t.handleUndo=function(){u.Instance.emit(o.REVOKE_STEP)},t.handleRestart=function(){u.Instance.emit(o.RESTART_LEVEL)},t.handleOut=function(){u.Instance.emit(o.OUT_BATTLE)},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesManager.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./TileManager.ts","./EventManager.ts","./DataManager.ts","./SpikesStateMachine.ts"],(function(t){"use strict";var n,e,o,i,s,a,r,c,u,h,f,p,_,l,y,E,d,T,M,S;return{setters:[function(t){n=t.cclegacy,e=t._decorator,o=t.Component,i=t.Sprite,s=t.UITransform},function(t){a=t.randomByLen},function(t){r=t.inheritsLoose,c=t.defineProperty,u=t.assertThisInitialized,h=t.createClass,f=t.asyncToGenerator},function(t){p=t.EVENT_ENUM,_=t.ENTITY_STATE_ENUM,l=t.PARAMS_NAME_ENUM,y=t.SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM},function(t){E=t.TILE_WIDTH,d=t.TILE_HEIGH},function(t){T=t.default},function(t){M=t.default},function(t){S=t.SpikesStateMachine}],execute:function(){var C;n._RF.push({},"985b6HNj/9JZK8P8LHZ6Ajt","SpikesManager",void 0);var m=e.ccclass;e.property,t("SpikesManager",m("SpikesManager")(C=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,c(u(n),"id",a(12)),c(u(n),"x",0),c(u(n),"y",0),c(u(n),"fsm",void 0),c(u(n),"_count",void 0),c(u(n),"_totalCount",void 0),c(u(n),"type",void 0),n}r(n,t);var e=n.prototype;return e.init=function(){var t=f(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.addComponent(i).sizeMode=i.SizeMode.CUSTOM,this.getComponent(s).setContentSize(4*E,4*d),this.fsm=this.addComponent(S),t.next=7,this.fsm.init();case 7:this.x=n.x,this.y=n.y,this.type=n.type,this.totalCount=y[this.type],this.count=n.count,T.Instance.on(p.PLAYER_MOVE_END,this.onLoop,this);case 13:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),e.onDestroy=function(){T.Instance.off(p.PLAYER_MOVE_END,this.onLoop)},e.update=function(){this.node.setPosition(this.x*E-1.5*E,-this.y*d+1.5*d)},e.onLoop=function(){this.count===this.totalCount?this.count=1:this.count++,this.onAttack()},e.backZero=function(){this.count=0},e.onAttack=function(){if(M.Instance.player){var t=M.Instance.player,n=t.x,e=t.y;this.x===n&&this.y===e&&this.count===this.totalCount&&T.Instance.emit(p.ATTACK_PLAYER,_.DEATH)}},h(n,[{key:"count",get:function(){return this._count},set:function(t){this._count=t,this.fsm.setParams(l.SPIKES_CUR_COUNT,t)}},{key:"totalCount",get:function(){return this._totalCount},set:function(t){this._totalCount=t,this.fsm.setParams(l.SPIKES_TOTAL_COUNT,t)}}]),n}(o))||C);n._RF.pop()}}}));

System.register("chunks:///_virtual/level21.ts",["cc","./index2.ts"],(function(t){"use strict";var e,L,s,c,r;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,s=t.DIRECTION_ENUM,c=t.ENTITY_STATE_ENUM,r=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"9c059L4KLJC5JeYvmtDjKrm","level21",void 0);var O=[[{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:18,type:L.CLIFF_LEFT}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:13,type:L.WALL_LEFT_BOTTOM},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:13,type:L.WALL_LEFT_BOTTOM},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:21,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT}],[{src:20,type:L.WALL_LEFT_TOP},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:19,type:L.CLIFF_RIGHT},{src:null,type:null}],[{src:15,type:L.WALL_RIGHT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],y={x:0,y:7,direction:s.TOP,state:c.IDLE,type:r.PLAYER},p=[{x:2,y:6,direction:s.LEFT,state:c.IDLE,type:r.SKELETON_WOODEN}],R=[{x:2,y:3,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:2,y:5,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:3,y:3,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:3,y:4,state:c.IDLE,type:r.BURST,direction:s.TOP}],F={x:7,y:6,direction:s.LEFT,state:c.IDLE,type:r.DOOR};t("default",{mapInfo:O,player:y,enemies:p,spikes:[],bursts:R,door:F});e._RF.pop()}}}));

System.register("chunks:///_virtual/IronSkeletonManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./EnemyManager.ts","./IronSkeletonStateMachine.ts"],(function(n){"use strict";var e,t,r,o,a,i;return{setters:[function(n){e=n.cclegacy,t=n._decorator},function(n){r=n.inheritsLoose,o=n.asyncToGenerator},function(n){a=n.EnemyManager},function(n){i=n.IronSkeletonStateMachine}],execute:function(){var c;e._RF.push({},"9d9fbcEtZ5GJZMqKlN8AjnM","IronSkeletonManager",void 0);var s=t.ccclass;t.property,n("IronSkeletonManager",s("IronSkeletonManager")(c=function(n){function e(){return n.apply(this,arguments)||this}return r(e,n),e.prototype.init=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fsm=this.addComponent(i),e.next=3,this.fsm.init();case 3:n.prototype.init.call(this,t);case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),e}(a))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./SubStateMachine.ts"],(function(t){"use strict";var e,n,i,u,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.PARAMS_NAME_ENUM,u=t.SPIKES_COUNT_MAP_NUMBER_ENUM},function(t){s=t.SubStateMachine}],execute:function(){e._RF.push({},"a0781rQIiJAgLuw46edU6rS","SpikesSubStateMachine",void 0);t("default",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.run=function(){var t=this.fsm.getParams(i.SPIKES_CUR_COUNT);this.currentState=this.stateMachines.get(u[t])},e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/level20.ts",["cc","./index2.ts"],(function(t){"use strict";var e,L,s,y,c;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,s=t.DIRECTION_ENUM,y=t.ENTITY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"a154asx5a5EQ4JFoQjtn47v","level20",void 0);var r=[[{src:null,type:null},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:20,type:L.WALL_ROW},{src:18,type:L.CLIFF_LEFT}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:20,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:15,type:L.WALL_RIGHT_TOP},{src:25,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:22,type:L.WALL_RIGHT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT}]],p={x:0,y:4,direction:s.RIGHT,state:y.IDLE,type:c.PLAYER},O=[{x:9,y:1,direction:s.LEFT,state:y.IDLE,type:c.SKELETON_WOODEN},{x:9,y:3,direction:s.LEFT,state:y.IDLE,type:c.SKELETON_IRON},{x:9,y:4,direction:s.LEFT,state:y.IDLE,type:c.SKELETON_IRON}],l=[{x:1,y:2,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:3,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:2,y:3,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:2,y:4,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:7,y:4,state:y.IDLE,type:c.BURST,direction:s.TOP}],R={x:9,y:0,direction:s.BOTTOM,state:y.IDLE,type:c.DOOR};t("default",{mapInfo:r,player:p,enemies:O,spikes:[],bursts:l,door:R});e._RF.pop()}}}));

System.register("chunks:///_virtual/IdleSubStateMachine4.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,o,i,a,s;return{setters:[function(t){e=t.cclegacy,n=t.AnimationClip},function(t){o=t.inheritsLoose},function(t){i=t.DIRECTION_ENUM},function(t){a=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"a5e92EJl/9Ohqr2f7U6fUJC","IdleSubStateMachine",void 0);var c="texture/ironskeleton/idle";t("default",function(t){function e(e){var o;return(o=t.call(this,e)||this).stateMachines.set(i.TOP,new a(e,c+"/top",n.WrapMode.Loop)),o.stateMachines.set(i.BOTTOM,new a(e,c+"/bottom",n.WrapMode.Loop)),o.stateMachines.set(i.LEFT,new a(e,c+"/left",n.WrapMode.Loop)),o.stateMachines.set(i.RIGHT,new a(e,c+"/right",n.WrapMode.Loop)),o}return o(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/DeathSubStateMachine3.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,a,s,i;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){a=t.DIRECTION_ENUM},function(t){s=t.default},function(t){i=t.default}],execute:function(){e._RF.push({},"a88af5GqspMHIQa4M6ydFYV","DeathSubStateMachine",void 0);var c="texture/player/death";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(a.TOP,new s(e,c+"/top")),n.stateMachines.set(a.BOTTOM,new s(e,c+"/bottom")),n.stateMachines.set(a.LEFT,new s(e,c+"/left")),n.stateMachines.set(a.RIGHT,new s(e,c+"/right")),n}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Singleton.ts"],(function(t){"use strict";var e,n,i,c,r,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose,i=t.createClass,c=t.defineProperty,r=t.assertThisInitialized},function(t){s=t.default}],execute:function(){e._RF.push({},"a99c0Lt0EVH36wWIUEO6do9","EventManager",void 0);t("default",function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,c(r(e),"eventDic",new Map),e}n(e,t);var s=e.prototype;return s.on=function(t,e,n){this.eventDic.has(t)?this.eventDic.get(t).push({func:e,ctx:n}):this.eventDic.set(t,[{func:e,ctx:n}])},s.off=function(t,e){if(this.eventDic.has(t)){var n=this.eventDic.get(t).findIndex((function(t){return t.func===e}));n>-1&&this.eventDic.get(t).splice(n,1)}},s.emit=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.eventDic.has(t)&&this.eventDic.get(t).forEach((function(t){var e=t.func,i=t.ctx;i?e.apply(i,n):e.apply(void 0,n)}))},s.clear=function(){this.eventDic.clear()},i(e,null,[{key:"Instance",get:function(){return t.GetInstance.call(this)}}]),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/index3.ts",["cc","./level6.ts","./level3.ts","./level2.ts","./level17.ts","./level8.ts","./level15.ts","./level18.ts","./level5.ts","./level10.ts","./level1.ts","./level11.ts","./level12.ts","./level13.ts","./level14.ts","./level16.ts","./level19.ts","./level20.ts","./level21.ts","./level4.ts","./level7.ts","./level9.ts"],(function(e){"use strict";var l,t,n,u,f,v,c,i,s,d,a,o,r,x,p,_,g,h,m,y,F,G;return{setters:[function(e){l=e.cclegacy},function(e){t=e.default},function(e){n=e.default},function(e){u=e.default},function(e){f=e.default},function(e){v=e.default},function(e){c=e.default},function(e){i=e.default},function(e){s=e.default},function(e){d=e.default},function(e){a=e.default},function(e){o=e.default},function(e){r=e.default},function(e){x=e.default},function(e){p=e.default},function(e){_=e.default},function(e){g=e.default},function(e){h=e.default},function(e){m=e.default},function(e){y=e.default},function(e){F=e.default},function(e){G=e.default}],execute:function(){l._RF.push({},"abfddm++uNG54Gx8ZJHfJrn","index",void 0);e("default",{level1:a,level2:u,level3:n,level4:y,level5:s,level6:t,level7:F,level8:v,level9:G,level10:d,level11:o,level12:r,level13:x,level14:p,level15:c,level16:_,level17:f,level18:i,level19:g,level20:h,level21:m});l._RF.pop()}}}));

System.register("chunks:///_virtual/IronSkeletonStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./StateMachine.ts","./IdleSubStateMachine4.ts","./DeathSubStateMachine4.ts"],(function(t){"use strict";var e,n,i,a,s,r,c,h,o,u,S;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Animation},function(t){a=t.inheritsLoose,s=t.asyncToGenerator},function(t){r=t.PARAMS_NAME_ENUM},function(t){c=t.getInitParamsTrigger,h=t.getInitParamsNumber,o=t.StateMachine},function(t){u=t.default},function(t){S=t.default}],execute:function(){var f;e._RF.push({},"ac9f1Vld65AjYGYtvagRL55","IronSkeletonStateMachine",void 0);var l=n.ccclass;n.property,t("IronSkeletonStateMachine",l("IronSkeletonStateMachine")(f=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.init=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponet=this.addComponent(i),this.initParams(),this.initStateMachine(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.initParams=function(){this.params.set(r.IDLE,c()),this.params.set(r.DIRECTION,h()),this.params.set(r.DEATH,h())},n.initStateMachine=function(){this.stateMachines.set(r.IDLE,new u(this)),this.stateMachines.set(r.DEATH,new S(this))},n.initAnimationEvent=function(){},n.run=function(){switch(this.currentState){case this.stateMachines.get(r.IDLE):case this.stateMachines.get(r.DEATH):this.params.get(r.IDLE).value?this.currentState=this.stateMachines.get(r.IDLE):this.params.get(r.DEATH).value?this.currentState=this.stateMachines.get(r.DEATH):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(r.IDLE)}},e}(o))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/TileManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts"],(function(t){"use strict";var e,i,n,s,r,o,a,p,h;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Sprite,s=t.UITransform,r=t.Component},function(t){o=t.inheritsLoose,a=t.defineProperty,p=t.assertThisInitialized},function(t){h=t.TILE_TYPE_ENUM}],execute:function(){var l;e._RF.push({},"ada7bDqybVJaqpp7shHv41V","TileManager",void 0);var L=i.ccclass,T=(i.property,t("TILE_WIDTH",55)),c=t("TILE_HEIGH",55);t("TileManager",L("TileManager")(l=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,a(p(e),"type",void 0),a(p(e),"moveable",void 0),a(p(e),"turnable",void 0),e}return o(e,t),e.prototype.init=function(t,e,i,r){this.type=t,this.type===h.WALL_ROW||this.type===h.WALL_COLUMN||this.type===h.WALL_LEFT_TOP||this.type===h.WALL_LEFT_BOTTOM||this.type===h.WALL_RIGHT_TOP||this.type===h.WALL_RIGHT_BOTTOM?(this.moveable=!1,this.turnable=!1):this.type===h.CLIFF_CENTER||this.type===h.CLIFF_LEFT||this.type===h.CLIFF_RIGHT?(this.moveable=!1,this.turnable=!0):this.type===h.FLOOR&&(this.moveable=!0,this.turnable=!0),this.addComponent(n).spriteFrame=e,this.getComponent(s).setContentSize(T,c),this.node.setPosition(i*T,-r*c)},e}(r))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesOneSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./SpikesSubStateMachine.ts"],(function(e){"use strict";var t,n,s,i,u;return{setters:[function(e){t=e.cclegacy},function(e){n=e.inheritsLoose},function(e){s=e.SPIKES_COUNT_ENUM},function(e){i=e.default},function(e){u=e.default}],execute:function(){t._RF.push({},"b00a8lA3Q1NsYtARU4cUsvQ","SpikesOneSubStateMachine",void 0);var c="texture/spikes/spikesone";e("default",function(e){function t(t){var n;return(n=e.call(this,t)||this).stateMachines.set(s.ZERO,new i(t,c+"/zero")),n.stateMachines.set(s.ONE,new i(t,c+"/one")),n.stateMachines.set(s.TWO,new i(t,c+"/two")),n}return n(t,e),t}(u));t._RF.pop()}}}));

System.register("chunks:///_virtual/level4.ts",["cc","./index2.ts"],(function(L){"use strict";var e,t,O,s,c;return{setters:[function(L){e=L.cclegacy},function(L){t=L.TILE_TYPE_ENUM,O=L.DIRECTION_ENUM,s=L.ENTITY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"b4385WVUt9LGo8ubPD+fX09","level4",void 0);var r=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:21,type:t.WALL_RIGHT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:19,type:t.CLIFF_RIGHT}]],p={x:2,y:7,direction:O.TOP,state:s.IDLE,type:c.PLAYER},y=[{x:1,y:3,direction:O.BOTTOM,state:s.IDLE,type:c.SKELETON_IRON}],T={x:2,y:0,direction:O.BOTTOM,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:p,enemies:y,spikes:[],bursts:[],door:T});e._RF.pop()}}}));

System.register("chunks:///_virtual/DeathSubStateMachine4.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,s,i,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){s=t.DIRECTION_ENUM},function(t){i=t.default},function(t){a=t.default}],execute:function(){e._RF.push({},"b68a4Z+HehBXZzD1y+TLEF2","DeathSubStateMachine",void 0);var c="texture/ironskeleton/death";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new i(e,c+"/top")),n.stateMachines.set(s.BOTTOM,new i(e,c+"/bottom")),n.stateMachines.set(s.LEFT,new i(e,c+"/left")),n.stateMachines.set(s.RIGHT,new i(e,c+"/right")),n}return n(e,t),e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/SmokeManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./EntityManager.ts","./SmokeStateMachine.ts"],(function(t){"use strict";var e,n,r,i,o,a;return{setters:[function(t){e=t.cclegacy,n=t._decorator},function(t){r=t.inheritsLoose,i=t.asyncToGenerator},function(t){o=t.EntityManager},function(t){a=t.SmokeStateMachine}],execute:function(){var c;e._RF.push({},"b8165HtFcdNfpTC4nfWIzAp","SmokeManager",void 0);var s=n.ccclass;n.property,t("SmokeManager",s("SmokeManager")(c=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){var e=i(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fsm=this.addComponent(a),e.next=3,this.fsm.init();case 3:t.prototype.init.call(this,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}(o))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/level12.ts",["cc","./index2.ts"],(function(t){"use strict";var e,L,s,c,r;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,s=t.DIRECTION_ENUM,c=t.ENTITY_STATE_ENUM,r=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"ba7b8MJEL5JVYGKPN/gE2OU","level12",void 0);var y=[[{src:20,type:L.WALL_LEFT_TOP},{src:1,type:L.FLOOR},{src:18,type:L.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:20,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:20,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_ROW},{src:23,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}]],p={x:3,y:5,direction:s.TOP,state:c.IDLE,type:r.PLAYER},O=[{x:1,y:1,direction:s.BOTTOM,state:c.IDLE,type:r.SKELETON_IRON},{x:6,y:2,direction:s.LEFT,state:c.IDLE,type:r.SKELETON_WOODEN}],E=[{x:4,y:2,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:4,y:3,state:c.IDLE,type:r.BURST,direction:s.TOP}],l={x:0,y:1,direction:s.LEFT,state:c.IDLE,type:r.DOOR};t("default",{mapInfo:y,player:p,enemies:O,spikes:[],bursts:E,door:l});e._RF.pop()}}}));

System.register("chunks:///_virtual/level11.ts",["cc","./index2.ts"],(function(t){"use strict";var L,e,O,y,c;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,O=t.DIRECTION_ENUM,y=t.ENTITY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"bac7cqvTtdEVYZytc+3NWCW","level11",void 0);var s=[[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:22,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:24,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:22,type:e.WALL_RIGHT_TOP},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:24,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:23,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:22,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],r={x:0,y:3,direction:O.RIGHT,state:y.IDLE,type:c.PLAYER},p=[{x:4,y:2,direction:O.LEFT,state:y.IDLE,type:c.SKELETON_WOODEN},{x:6,y:1,direction:O.LEFT,state:y.IDLE,type:c.SKELETON_IRON},{x:9,y:1,direction:O.LEFT,state:y.IDLE,type:c.SKELETON_IRON}],R=[{x:4,y:1,type:c.SPIKES_THREE,count:0},{x:6,y:3,type:c.SPIKES_TWO,count:0}],_=[{x:3,y:3,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:3,y:4,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:5,y:2,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:8,y:3,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:8,y:4,state:y.IDLE,type:c.BURST,direction:O.TOP}],T={x:9,y:0,direction:O.BOTTOM,state:y.IDLE,type:c.DOOR};t("default",{mapInfo:s,player:r,enemies:p,spikes:R,bursts:_,door:T});L._RF.pop()}}}));

System.register("chunks:///_virtual/level16.ts",["cc","./index2.ts"],(function(t){"use strict";var L,e,O,y,s;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,O=t.DIRECTION_ENUM,y=t.ENTITY_STATE_ENUM,s=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"bbbf0UKP3hDs62EX72YEuRD","level16",void 0);var c=[[{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:20,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_RIGHT},{src:null,type:null}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT},{src:null,type:null}]],r={x:0,y:1,direction:O.RIGHT,state:y.IDLE,type:s.PLAYER},p=[{x:4,y:4,direction:O.LEFT,state:y.IDLE,type:s.SKELETON_WOODEN},{x:5,y:3,direction:O.LEFT,state:y.IDLE,type:s.SKELETON_WOODEN},{x:6,y:2,direction:O.LEFT,state:y.IDLE,type:s.SKELETON_WOODEN},{x:4,y:6,direction:O.TOP,state:y.IDLE,type:s.SKELETON_IRON},{x:4,y:7,direction:O.TOP,state:y.IDLE,type:s.SKELETON_IRON}],R=[{x:4,y:5,type:s.SPIKES_THREE,count:0},{x:5,y:5,type:s.SPIKES_TWO,count:0},{x:6,y:5,type:s.SPIKES_ONE,count:0}],_=[{x:3,y:5,state:y.IDLE,type:s.BURST,direction:O.TOP},{x:3,y:6,state:y.IDLE,type:s.BURST,direction:O.TOP},{x:3,y:7,state:y.IDLE,type:s.BURST,direction:O.TOP}],E={x:0,y:7,direction:O.LEFT,state:y.IDLE,type:s.DOOR};t("default",{mapInfo:c,player:r,enemies:p,spikes:R,bursts:_,door:E});L._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts"],(function(r){"use strict";var e,t,n,o,a,i,c,s,u,l,p;return{setters:[function(r){e=r.cclegacy,t=r._decorator,n=r.ProgressBar,o=r.resources,a=r.director,i=r.Component},function(r){c=r.applyDecoratedDescriptor,s=r.inheritsLoose,u=r.initializerDefineProperty,l=r.assertThisInitialized},function(r){p=r.SCENE_ENUM}],execute:function(){var g,d,f,y,b;e._RF.push({},"c3a49DNTOtDboKDAUYo2tpD","LoadingManager",void 0);var h=t.ccclass,v=t.property;r("LoadingManager",(g=h("LoadingManager"),d=v(n),g((b=c((y=function(r){function e(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n))||this,u(l(e),"bar",b,l(e)),e}return s(e,r),e.prototype.onLoad=function(){var r=this;o.preload("texture/ctrl",(function(e,t){r.bar.progress=e/t}),(function(){a.loadScene(p.start)}))},e}(i)).prototype,"bar",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));e._RF.pop()}}}));

System.register("chunks:///_virtual/TileMapManager.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./ResourceManager.ts","./TileManager.ts","./DataManager.ts"],(function(e){"use strict";var n,t,r,a,i,c,o,u,s,l;return{setters:[function(e){n=e.cclegacy,t=e._decorator,r=e.Component},function(e){a=e.createUINode,i=e.randomByRange},function(e){c=e.inheritsLoose,o=e.asyncToGenerator},function(e){u=e.default},function(e){s=e.TileManager},function(e){l=e.default}],execute:function(){var f;n._RF.push({},"c4f73Vl8w5JGL0an3V2ry2i","TileMapManager",void 0);var p=t.ccclass;t.property,e("TileMapManager",p("TileMapManager")(f=function(e){function n(){return e.apply(this,arguments)||this}return c(n,e),n.prototype.init=function(){var e=o(regeneratorRuntime.mark((function e(){var n,t,r,c,o,f,p=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Instance.loadDir("texture/tile/tile");case 2:n=e.sent,t=l.Instance.mapInfo,l.Instance.tileInfo=[],r=0;case 6:if(!(r<t.length)){e.next=21;break}c=t[r],l.Instance.tileInfo[r]=[],o=function(e){var t=c[e];if(null==t.src||null==t.type)return"continue";var o=a(),u=t.src;1!==u&&5!==u&&9!==u||r%2!=0||e%2!=0||(u+=i(0,4));var f="tile ("+u+")",g=n.find((function(e){return e.name===f}))||n[0],d=o.addComponent(s),M=t.type;d.init(M,g,r,e),l.Instance.tileInfo[r][e]=d,o.setParent(p.node)},f=0;case 11:if(!(f<c.length)){e.next=18;break}if("continue"!==o(f)){e.next=15;break}return e.abrupt("continue",15);case 15:f++,e.next=11;break;case 18:r++,e.next=6;break;case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n}(r))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/TurnLeftSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,s,i,u;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){s=t.DIRECTION_ENUM},function(t){i=t.default},function(t){u=t.default}],execute:function(){e._RF.push({},"c724agH1XRJzb4vN1E52Umw","TurnLeftSubStateMachine",void 0);var a="texture/player/turnleft";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new i(e,a+"/top")),n.stateMachines.set(s.BOTTOM,new i(e,a+"/bottom")),n.stateMachines.set(s.LEFT,new i(e,a+"/left")),n.stateMachines.set(s.RIGHT,new i(e,a+"/right")),n}return n(e,t),e}(u));e._RF.pop()}}}));

System.register("chunks:///_virtual/IdleSubStateMachine5.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,i,o,a,s;return{setters:[function(t){e=t.cclegacy,n=t.AnimationClip},function(t){i=t.inheritsLoose},function(t){o=t.DIRECTION_ENUM},function(t){a=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"c9123BYe8dD247lFrL0a14F","IdleSubStateMachine",void 0);var c="texture/player/idle";t("default",function(t){function e(e){var i;return(i=t.call(this,e)||this).stateMachines.set(o.TOP,new a(e,c+"/top",n.WrapMode.Loop)),i.stateMachines.set(o.BOTTOM,new a(e,c+"/bottom",n.WrapMode.Loop)),i.stateMachines.set(o.LEFT,new a(e,c+"/left",n.WrapMode.Loop)),i.stateMachines.set(o.RIGHT,new a(e,c+"/right",n.WrapMode.Loop)),i}return i(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/DeathSubStateMachine5.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,s,i,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){s=t.DIRECTION_ENUM},function(t){i=t.default},function(t){a=t.default}],execute:function(){e._RF.push({},"cbe8cQr6T9OFJeBp2RWtX6G","DeathSubStateMachine",void 0);var c="texture/woodenskeleton/death";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(s.TOP,new i(e,c+"/top")),n.stateMachines.set(s.BOTTOM,new i(e,c+"/bottom")),n.stateMachines.set(s.LEFT,new i(e,c+"/left")),n.stateMachines.set(s.RIGHT,new i(e,c+"/right")),n}return n(e,t),e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/DoorManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./DoorStateMachine.ts","./EntityManager.ts","./EventManager.ts","./DataManager.ts"],(function(t){"use strict";var n,e,r,o,a,i,s,c,u,f;return{setters:[function(t){n=t.cclegacy,e=t._decorator},function(t){r=t.inheritsLoose,o=t.asyncToGenerator},function(t){a=t.EVENT_ENUM,i=t.ENTITY_STATE_ENUM},function(t){s=t.DoorStateMachine},function(t){c=t.EntityManager},function(t){u=t.default},function(t){f=t.default}],execute:function(){var p;n._RF.push({},"cddc2xJteFNoK3GZ/a4G4SR","DoorManager",void 0);var h=e.ccclass;e.property,t("DoorManager",h("DoornManager")(p=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var e=n.prototype;return e.init=function(){var n=o(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.fsm=this.addComponent(s),n.next=3,this.fsm.init();case 3:t.prototype.init.call(this,e),u.Instance.on(a.DOOR_OPEN,this.onOpen,this);case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),e.onDestroy=function(){t.prototype.onDestroy.call(this),u.Instance.off(a.DOOR_OPEN,this.onOpen)},e.onOpen=function(){f.Instance.enemies.every((function(t){return t.state===i.DEATH}))&&this.state!==i.DEATH&&(this.state=i.DEATH)},n}(c))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/level9.ts",["cc","./index2.ts"],(function(t){"use strict";var L,e,y,O,c;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,y=t.DIRECTION_ENUM,O=t.ENTITY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"d390e1JiMdKbq9nic3PnOgn","level9",void 0);var s=[[{src:20,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:22,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:16,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:20,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],r={x:2,y:11,direction:y.TOP,state:O.IDLE,type:c.PLAYER},p=[{x:1,y:1,direction:y.BOTTOM,state:O.IDLE,type:c.SKELETON_WOODEN},{x:2,y:7,direction:y.BOTTOM,state:O.IDLE,type:c.SKELETON_WOODEN}],T=[{x:1,y:3,type:c.SPIKES_THREE,count:0},{x:3,y:6,type:c.SPIKES_ONE,count:0},{x:2,y:9,type:c.SPIKES_TWO,count:0}],_=[{x:3,y:1,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:3,y:4,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:3,y:5,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:2,y:10,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:3,y:10,state:O.IDLE,type:c.BURST,direction:y.TOP}],E={x:0,y:1,direction:y.LEFT,state:O.IDLE,type:c.DOOR};t("default",{mapInfo:s,player:r,enemies:p,spikes:T,bursts:_,door:E});L._RF.pop()}}}));

System.register("chunks:///_virtual/FadeManager.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./Singleton.ts","./DrawManager.ts"],(function(e){"use strict";var t,r,n,a,i,u,s,o,c,f,d,l;return{setters:[function(e){t=e.cclegacy,r=e.RenderRoot2D,n=e.game},function(e){a=e.createUINode},function(e){i=e.inheritsLoose,u=e.createClass,s=e.defineProperty,o=e.assertThisInitialized,c=e.asyncToGenerator},function(e){f=e.default},function(e){d=e.DrawManager,l=e.DEFAULT_DURATION}],execute:function(){t._RF.push({},"d3c89Yrk1RN8L6xHc0MrRMA","FadeManager",void 0);e("default",function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,s(o(t),"_fader",null),t}i(t,e);var f=t.prototype;return f.fadeIn=function(){var e=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=l),e.next=3,this.fader.fadeIn(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),f.fadeOut=function(){var e=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=l),e.next=3,this.fader.fadeOut(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),f.mask=function(){return this.fader.mask()},u(t,[{key:"fader",get:function(){if(null!==this._fader)return this._fader;var e=a();e.addComponent(r);var t=a();return t.setParent(e),this._fader=t.addComponent(d),this._fader.init(),n.addPersistRootNode(e),this._fader}}],[{key:"Instance",get:function(){return e.GetInstance.call(this)}}]),t}(f));t._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./EntityManager.ts","./EventManager.ts","./DataManager.ts"],(function(t){"use strict";var n,e,i,s,a,r,o,c,h,u;return{setters:[function(t){n=t.cclegacy,e=t._decorator},function(t){i=t.inheritsLoose,s=t.asyncToGenerator},function(t){a=t.EVENT_ENUM,r=t.ENTITY_STATE_ENUM,o=t.DIRECTION_ENUM},function(t){c=t.EntityManager},function(t){h=t.default},function(t){u=t.default}],execute:function(){var E;n._RF.push({},"d7374iQB8pLAKT7b+pqsRDp","EnemyManager",void 0);var f=e.ccclass;e.property,t("EnemyManager",f("EnemyManager")(E=function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var e=n.prototype;return e.init=function(){var n=s(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.prototype.init.call(this,e),h.Instance.on(a.PLAYER_MOVE_END,this.onChangeDirection,this),h.Instance.on(a.PLAYER_BORN,this.onChangeDirection,this),h.Instance.on(a.ATTACK_ENEMY,this.onDead,this),this.onChangeDirection(!0);case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),e.onDestroy=function(){t.prototype.onDestroy.call(this),h.Instance.off(a.PLAYER_MOVE_END,this.onChangeDirection),h.Instance.off(a.PLAYER_BORN,this.onChangeDirection),h.Instance.off(a.ATTACK_ENEMY,this.onDead)},e.onChangeDirection=function(t){if(void 0===t&&(t=!1),this.state!==r.DEATH&&u.Instance.player&&u.Instance.player){var n=u.Instance.player,e=n.x,i=n.y,s=Math.abs(this.x-e),a=Math.abs(this.y-e);(s!==a||t)&&(e>=this.x&&i<=this.y?this.direction=s<a?o.TOP:o.RIGHT:e<=this.x&&i<=this.y?this.direction=s<a?o.TOP:o.LEFT:e<=this.x&&i>=this.y?this.direction=s<a?o.BOTTOM:o.LEFT:e>=this.x&&i>=this.y&&(this.direction=s<a?o.BOTTOM:o.RIGHT))}},e.onDead=function(t){this.state!==r.DEATH&&this.id===t&&(this.state=r.DEATH)},n}(c))||E);n._RF.pop()}}}));

System.register("chunks:///_virtual/level14.ts",["cc","./index2.ts"],(function(t){"use strict";var e,L,O,s,y;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,O=t.DIRECTION_ENUM,s=t.ENTITY_STATE_ENUM,y=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"d7d98d/mplNZalCZnrd3x9k","level14",void 0);var c=[[{src:22,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:13,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:20,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_RIGHT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_RIGHT},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_RIGHT},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_CENTER}],[{src:27,type:L.WALL_ROW},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_CENTER},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_CENTER}],[{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_RIGHT_TOP},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null}]],r={x:1,y:0,direction:O.BOTTOM,state:s.IDLE,type:y.PLAYER},p=[{x:3,y:4,direction:O.TOP,state:s.IDLE,type:y.SKELETON_WOODEN},{x:8,y:3,direction:O.LEFT,state:s.IDLE,type:y.SKELETON_WOODEN}],R=[{x:3,y:2,type:y.SPIKES_TWO,count:0}],F=[{x:1,y:4,state:s.IDLE,type:y.BURST,direction:O.TOP},{x:5,y:2,state:s.IDLE,type:y.BURST,direction:O.TOP},{x:5,y:4,state:s.IDLE,type:y.BURST,direction:O.TOP},{x:7,y:3,state:s.IDLE,type:y.BURST,direction:O.TOP},{x:7,y:4,state:s.IDLE,type:y.BURST,direction:O.TOP},{x:8,y:2,state:s.IDLE,type:y.BURST,direction:O.TOP}],_={x:10,y:1,direction:O.LEFT,state:s.IDLE,type:y.DOOR};t("default",{mapInfo:c,player:r,enemies:p,spikes:R,bursts:F,door:_});e._RF.pop()}}}));

System.register("chunks:///_virtual/level19.ts",["cc","./index2.ts"],(function(L){"use strict";var t,e,s,y,c;return{setters:[function(L){t=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,s=L.DIRECTION_ENUM,y=L.ENTITY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"db8e5WsAJVEjrF9bVxcJETI","level19",void 0);var r=[[{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_RIGHT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT},{src:21,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:21,type:e.WALL_ROW},{src:19,type:e.CLIFF_RIGHT}]],O={x:0,y:1,direction:s.RIGHT,state:y.IDLE,type:c.PLAYER},p=[{x:2,y:5,direction:s.TOP,state:y.IDLE,type:c.SKELETON_WOODEN},{x:4,y:9,direction:s.TOP,state:y.IDLE,type:c.SKELETON_WOODEN}],_=[{x:1,y:5,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:6,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:7,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:8,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:9,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:2,y:6,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:2,y:7,state:y.IDLE,type:c.BURST,direction:s.TOP}],R={x:6,y:9,direction:s.LEFT,state:y.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:O,enemies:p,spikes:[],bursts:_,door:R});t._RF.pop()}}}));

System.register("chunks:///_virtual/BlockFrontSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,c,s,i;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){c=t.DIRECTION_ENUM},function(t){s=t.default},function(t){i=t.default}],execute:function(){e._RF.push({},"dfcb0HGboNBQ6Hh17QFP3vl","BlockFrontSubStateMachine",void 0);var o="texture/player/blockfront";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(c.TOP,new s(e,o+"/top")),n.stateMachines.set(c.BOTTOM,new s(e,o+"/bottom")),n.stateMachines.set(c.LEFT,new s(e,o+"/left")),n.stateMachines.set(c.RIGHT,new s(e,o+"/right")),n}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/StartManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./FadeManager.ts"],(function(t){"use strict";var e,n,r,a,o,c,s,u,i;return{setters:[function(t){e=t.cclegacy,n=t._decorator,r=t.Node,a=t.Component,o=t.director},function(t){c=t.inheritsLoose,s=t.asyncToGenerator},function(t){u=t.SCENE_ENUM},function(t){i=t.default}],execute:function(){var p;e._RF.push({},"e9321p0T8hBMZxS9ESnjJjU","StartManager",void 0);var f=n.ccclass;n.property,t("StartManager",f("StartManager")(p=function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var n=e.prototype;return n.onLoad=function(){i.Instance.fadeOut(1e3),this.node.once(r.EventType.TOUCH_END,this.handleStart,this)},n.handleStart=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Instance.fadeIn(300);case 2:o.loadScene(u.battle);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e}(a))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/AirDeathSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,i,a,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.DIRECTION_ENUM},function(t){a=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"ecd9eCzvClByrPl/4XK5pSO","AirDeathSubStateMachine",void 0);var c="texture/player/airdeath";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(i.TOP,new a(e,c+"/top")),n.stateMachines.set(i.BOTTOM,new a(e,c+"/bottom")),n.stateMachines.set(i.LEFT,new a(e,c+"/left")),n.stateMachines.set(i.RIGHT,new a(e,c+"/right")),n}return n(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./EntityManager.ts","./EventManager.ts","./DataManager.ts","./PlayerStateMachine.ts"],(function(t){"use strict";var i,e,r,n,s,a,o,u,T,h,l,v,f,O,d;return{setters:[function(t){i=t.cclegacy,e=t._decorator},function(t){r=t.inheritsLoose,n=t.defineProperty,s=t.assertThisInitialized,a=t.asyncToGenerator},function(t){o=t.EVENT_ENUM,u=t.ENTITY_STATE_ENUM,T=t.CONTROLLER_ENUM,h=t.SHAKE_TYPE_ENUM,l=t.DIRECTION_ENUM},function(t){v=t.EntityManager},function(t){f=t.default},function(t){O=t.default},function(t){d=t.PlayerStateMachine}],execute:function(){var E;i._RF.push({},"f072bdBhltAi5DMZPiRNGA6","PlayerManager",void 0);var L=e.ccclass;e.property,t("PlayerManager",L("PlayerManager")(E=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,n(s(i),"targetX",0),n(s(i),"targetY",0),n(s(i),"isMoving",!1),n(s(i),"speed",.1),i}r(i,t);var e=i.prototype;return e.init=function(){var i=a(regeneratorRuntime.mark((function i(e){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return this.fsm=this.addComponent(d),i.next=3,this.fsm.init();case 3:t.prototype.init.call(this,e),this.targetX=this.x,this.targetY=this.y,f.Instance.on(o.PLAYER_CTRL,this.inputHandle,this),f.Instance.on(o.ATTACK_PLAYER,this.onDeath,this);case 8:case"end":return i.stop()}}),i,this)})));return function(t){return i.apply(this,arguments)}}(),e.onDestroy=function(){t.prototype.onDestroy.call(this),f.Instance.off(o.PLAYER_CTRL,this.inputHandle),f.Instance.off(o.ATTACK_PLAYER,this.onDeath)},e.update=function(){this.updateXY(),t.prototype.update.call(this)},e.updateXY=function(){this.targetX<this.x?this.x-=this.speed:this.targetX>this.x&&(this.x+=this.speed),this.targetY<this.y?this.y-=this.speed:this.targetY>this.y&&(this.y+=this.speed),Math.abs(this.x-this.targetX)<=.1&&Math.abs(this.y-this.targetY)<=.1&&this.isMoving&&(this.isMoving=!1,this.x=this.targetX,this.y=this.targetY,f.Instance.emit(o.PLAYER_MOVE_END))},e.inputHandle=function(t){if(!this.isMoving&&this.state!==u.DEATH&&this.state!==u.AIRDEATH&&this.state!==u.ATTACK){var i=this.willAttack(t);if(i)return f.Instance.emit(o.RECORD_STEP),this.state=u.ATTACK,f.Instance.emit(o.ATTACK_ENEMY,i),void f.Instance.emit(o.DOOR_OPEN);this.willBlock(t)?t===T.TOP?f.Instance.emit(o.SCREEN_SHAKE,h.TOP):t===T.BOTTOM?f.Instance.emit(o.SCREEN_SHAKE,h.BOTTOM):t===T.LEFT?f.Instance.emit(o.SCREEN_SHAKE,h.LEFT):t===T.RIGHT?f.Instance.emit(o.SCREEN_SHAKE,h.RIGHT):t===T.TURNLEFT?this.direction===l.TOP?f.Instance.emit(o.SCREEN_SHAKE,h.LEFT):this.direction===l.BOTTOM?f.Instance.emit(o.SCREEN_SHAKE,h.RIGHT):this.direction===l.LEFT?f.Instance.emit(o.SCREEN_SHAKE,h.BOTTOM):this.direction===l.RIGHT&&f.Instance.emit(o.SCREEN_SHAKE,h.TOP):t===T.TURNRIGHT&&(this.direction===l.TOP?f.Instance.emit(o.SCREEN_SHAKE,h.RIGHT):this.direction===l.BOTTOM?f.Instance.emit(o.SCREEN_SHAKE,h.LEFT):this.direction===l.LEFT?f.Instance.emit(o.SCREEN_SHAKE,h.TOP):this.direction===l.RIGHT&&f.Instance.emit(o.SCREEN_SHAKE,h.BOTTOM)):this.move(t)}},e.move=function(t){f.Instance.emit(o.RECORD_STEP),t===T.TOP?(this.targetY-=1,this.isMoving=!0,this.showSmoke(l.TOP)):t===T.BOTTOM?(this.targetY+=1,this.isMoving=!0,this.showSmoke(l.BOTTOM)):t===T.LEFT?(this.targetX-=1,this.isMoving=!0,this.showSmoke(l.LEFT)):t===T.RIGHT?(this.targetX+=1,this.isMoving=!0,this.showSmoke(l.RIGHT)):t===T.TURNLEFT?(this.direction===l.TOP?this.direction=l.LEFT:this.direction===l.LEFT?this.direction=l.BOTTOM:this.direction===l.BOTTOM?this.direction=l.RIGHT:this.direction===l.RIGHT&&(this.direction=l.TOP),this.state=u.TURNLEFT,f.Instance.emit(o.PLAYER_MOVE_END)):t===T.TURNRIGHT&&(this.direction===l.TOP?this.direction=l.RIGHT:this.direction===l.BOTTOM?this.direction=l.LEFT:this.direction===l.LEFT?this.direction=l.TOP:this.direction===l.RIGHT&&(this.direction=l.BOTTOM),this.state=u.TURNRIGHT,f.Instance.emit(o.PLAYER_MOVE_END))},e.willAttack=function(t){for(var i=O.Instance.enemies.filter((function(t){return t.state!==u.DEATH})),e=0;e<i.length;++e){var r=i[e],n=r.x,s=r.y,a=r.id;if(t===T.TOP&&this.direction===l.TOP&&n===this.x&&s===this.y-2)return this.state=u.ATTACK,a;if(t===T.LEFT&&this.direction===l.LEFT&&n===this.x-2&&s===this.y)return this.state=u.ATTACK,a;if(t===T.BOTTOM&&this.direction===l.BOTTOM&&n===this.x&&s===this.y+2)return this.state=u.ATTACK,a;if(t===T.RIGHT&&this.direction===l.RIGHT&&n===this.x+2&&s===this.y)return this.state=u.ATTACK,a}return""},e.onDeath=function(t){this.state=t},e.showSmoke=function(t){f.Instance.emit(o.SHOW_SMOKE,this.x,this.y,t)},e.willBlock=function(t){var i=this.targetX,e=this.targetY,r=this.direction,n=O.Instance.tileInfo,s=O.Instance.enemies.filter((function(t){return t.state!==u.DEATH})),a=O.Instance.door||{},o=a.x,h=a.y,v=a.state,f=O.Instance.bursts.filter((function(t){return t.state!==u.DEATH})),d=O.Instance,E=d.mapRowCount,L=d.mapColumnCount;if(t===T.TOP){var c=e-1;if(r===l.TOP){var C,R;if(c<0)return this.state=u.BLOCKFRONT,!0;var B=e-2,K=null===(C=n[i])||void 0===C?void 0:C[c],H=null===(R=n[i])||void 0===R?void 0:R[B];if((o===i&&h===c||o===i&&h===B)&&v!==u.DEATH)return this.state=u.BLOCKFRONT,!0;for(var A=0;A<s.length;A++){var I=s[A],m=I.x,y=I.y;if(m===i&&y===B||m===i&&y===c)return this.state=u.BLOCKFRONT,!0}if(f.some((function(t){return t.x===i&&t.y===c}))&&(!H||H.turnable))return!1;if(!K||!K.moveable||H&&!H.turnable)return this.state=u.BLOCKFRONT,!0}else if(r===l.BOTTOM){var F,N;if(c<0)return this.state=u.BLOCKBACK,!0;var b=e,g=null===(F=n[i])||void 0===F?void 0:F[c],M=null===(N=n[i])||void 0===N?void 0:N[b];if((o===i&&h===c||o===i&&h===b)&&v!==u.DEATH)return this.state=u.BLOCKBACK,!0;for(var x=0;x<s.length;x++){var G=s[x],P=G.x,_=G.y;if(P===i&&_===c)return this.state=u.BLOCKBACK,!0}if(f.some((function(t){return t.x===i&&t.y===c}))&&(!M||M.turnable))return!1;if(!g||!g.moveable||M&&!M.turnable)return this.state=u.BLOCKBACK,!0}else if(r===l.LEFT){var p,S;if(c<0)return this.state=u.BLOCKRIGHT,!0;var D=i-1,U=e-1,Y=null===(p=n[i])||void 0===p?void 0:p[c],w=null===(S=n[D])||void 0===S?void 0:S[U];if((o===i&&h===c||o===D&&h===U)&&v!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var k=0;k<s.length;k++){var X=s[k],V=X.x,j=X.y;if(V===i&&j===c||V===D&&j===U)return this.state=u.BLOCKRIGHT,!0}if(f.some((function(t){return t.x===i&&t.y===c}))&&(!w||w.turnable))return!1;if(!Y||!Y.moveable||w&&!w.turnable)return this.state=u.BLOCKRIGHT,!0}else if(r===l.RIGHT){var z,W;if(c<0)return this.state=u.BLOCKLEFT,!0;var Z=i+1,q=e-1,J=null===(z=n[i])||void 0===z?void 0:z[c],Q=null===(W=n[Z])||void 0===W?void 0:W[q];if((o===i&&h===c||o===Z&&h===q)&&v!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var $=0;$<s.length;$++){var tt=s[$],it=tt.x,et=tt.y;if(it===i&&et===c||it===Z&&et===q)return this.state=u.BLOCKLEFT,!0}if(f.some((function(t){return t.x===i&&t.y===c}))&&(!Q||Q.turnable))return!1;if(!J||!J.moveable||Q&&!Q.turnable)return this.state=u.BLOCKLEFT,!0}}else if(t===T.BOTTOM){var rt=e+1;if(r===l.TOP){var nt,st;if(rt>L-1)return this.state=u.BLOCKBACK,!0;var at=e,ot=null===(nt=n[i])||void 0===nt?void 0:nt[rt],ut=null===(st=n[i])||void 0===st?void 0:st[at];if((o===i&&h===rt||o===i&&h===at)&&v!==u.DEATH)return this.state=u.BLOCKBACK,!0;for(var Tt=0;Tt<s.length;Tt++){var ht=s[Tt],lt=ht.x,vt=ht.y;if(lt===i&&vt===rt)return this.state=u.BLOCKBACK,!0}if(f.some((function(t){return t.x===i&&t.y===rt}))&&(!ut||ut.turnable))return!1;if(!ot||!ot.moveable||ut&&!ut.turnable)return this.state=u.BLOCKBACK,!0}else if(r===l.BOTTOM){var ft,Ot;if(rt>L-1)return this.state=u.BLOCKFRONT,!0;var dt=e+2,Et=null===(ft=n[i])||void 0===ft?void 0:ft[rt],Lt=null===(Ot=n[i])||void 0===Ot?void 0:Ot[dt];if((o===i&&h===rt||o===i&&h===dt)&&v!==u.DEATH)return this.state=u.BLOCKFRONT,!0;for(var ct=0;ct<s.length;ct++){var Ct=s[ct],Rt=Ct.x,Bt=Ct.y;if(Rt===i&&Bt===dt||Rt===i&&Bt===rt)return this.state=u.BLOCKFRONT,!0}if(f.some((function(t){return t.x===i&&t.y===rt}))&&(!Lt||Lt.turnable))return!1;if(!Et||!Et.moveable||Lt&&!Lt.turnable)return this.state=u.BLOCKFRONT,!0}else if(r===l.LEFT){var Kt,Ht;if(rt>L-1)return this.state=u.BLOCKLEFT,!0;var At=i-1,It=e+1,mt=null===(Kt=n[i])||void 0===Kt?void 0:Kt[rt],yt=null===(Ht=n[At])||void 0===Ht?void 0:Ht[It];if((o===i&&h===rt||o===At&&h===It)&&v!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var Ft=0;Ft<s.length;Ft++){var Nt=s[Ft],bt=Nt.x,gt=Nt.y;if(bt===i&&gt===rt||bt===At&&gt===It)return this.state=u.BLOCKLEFT,!0}if(f.some((function(t){return t.x===i&&t.y===rt}))&&(!yt||yt.turnable))return!1;if(!mt||!mt.moveable||yt&&!yt.turnable)return this.state=u.BLOCKLEFT,!0}else if(r===l.RIGHT){var Mt,xt;if(rt>L-1)return this.state=u.BLOCKRIGHT,!0;var Gt=i+1,Pt=e+1,_t=null===(Mt=n[i])||void 0===Mt?void 0:Mt[rt],pt=null===(xt=n[Gt])||void 0===xt?void 0:xt[Pt];if((o===i&&h===rt||o===Gt&&h===Pt)&&v!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var St=0;St<s.length;St++){var Dt=s[St],Ut=Dt.x,Yt=Dt.y;if(Ut===i&&Yt===rt||Ut===Gt&&Yt===Pt)return this.state=u.BLOCKRIGHT,!0}if(f.some((function(t){return t.x===i&&t.y===rt}))&&(!pt||pt.turnable))return!1;if(!_t||!_t.moveable||pt&&!pt.turnable)return this.state=u.BLOCKRIGHT,!0}}else if(t===T.LEFT){var wt=i-1;if(r===l.TOP){var kt,Xt;if(wt<0)return this.state=u.BLOCKLEFT,!0;var Vt=i-1,jt=e-1,zt=null===(kt=n[wt])||void 0===kt?void 0:kt[e],Wt=null===(Xt=n[Vt])||void 0===Xt?void 0:Xt[jt];if((o===wt&&h===e||o===Vt&&h===jt)&&v!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var Zt=0;Zt<s.length;Zt++){var qt=s[Zt],Jt=qt.x,Qt=qt.y;if(Jt===wt&&Qt===e||Jt===Vt&&Qt===jt)return this.state=u.BLOCKLEFT,!0}if(f.some((function(t){return t.x===wt&&t.y===e}))&&(!Wt||Wt.turnable))return!1;if(!zt||!zt.moveable||Wt&&!Wt.turnable)return this.state=u.BLOCKLEFT,!0}else if(r===l.BOTTOM){var $t,ti;if(wt<0)return this.state=u.BLOCKRIGHT,!0;var ii=i-1,ei=e+1,ri=null===($t=n[wt])||void 0===$t?void 0:$t[e],ni=null===(ti=n[ii])||void 0===ti?void 0:ti[ei];if((o===wt&&h===e||o===ii&&h===ei)&&v!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var si=0;si<s.length;si++){var ai=s[si],oi=ai.x,ui=ai.y;if(oi===wt&&ui===e||oi===ii&&ui===ei)return this.state=u.BLOCKRIGHT,!0}if(f.some((function(t){return t.x===wt&&t.y===e}))&&(!ni||ni.turnable))return!1;if(!ri||!ri.moveable||ni&&!ni.turnable)return this.state=u.BLOCKRIGHT,!0}else if(r===l.LEFT){var Ti,hi;if(wt<0)return this.state=u.BLOCKFRONT,!0;var li=i-2,vi=null===(Ti=n[wt])||void 0===Ti?void 0:Ti[e],fi=null===(hi=n[li])||void 0===hi?void 0:hi[e];if((o===wt&&h===e||o===li&&h===e)&&v!==u.DEATH)return this.state=u.BLOCKFRONT,!0;for(var Oi=0;Oi<s.length;Oi++){var di=s[Oi],Ei=di.x,Li=di.y;if(Ei===wt&&Li===e||Ei===li&&Li===e)return this.state=u.BLOCKFRONT,!0}if(f.some((function(t){return t.x===wt&&t.y===e}))&&(!fi||fi.turnable))return!1;if(!vi||!vi.moveable||fi&&!fi.turnable)return this.state=u.BLOCKFRONT,!0}else if(r===l.RIGHT){var ci,Ci;if(wt<0)return this.state=u.BLOCKBACK,!0;var Ri=i,Bi=null===(ci=n[wt])||void 0===ci?void 0:ci[e],Ki=null===(Ci=n[Ri])||void 0===Ci?void 0:Ci[e];if((o===wt&&h===e||o===Ri&&h===e)&&v!==u.DEATH)return this.state=u.BLOCKBACK,!0;for(var Hi=0;Hi<s.length;Hi++){var Ai=s[Hi],Ii=Ai.x,mi=Ai.y;if(Ii===wt&&mi===e)return this.state=u.BLOCKBACK,!0}if(f.some((function(t){return t.x===wt&&t.y===e}))&&(!Ki||Ki.turnable))return!1;if(!Bi||!Bi.moveable||Ki&&!Ki.turnable)return this.state=u.BLOCKBACK,!0}}else if(t===T.RIGHT){var yi=i+1;if(r===l.TOP){var Fi,Ni;if(yi>E-1)return this.state=u.BLOCKRIGHT,!0;var bi=i+1,gi=e-1,Mi=null===(Fi=n[yi])||void 0===Fi?void 0:Fi[e],xi=null===(Ni=n[bi])||void 0===Ni?void 0:Ni[gi];if((o===yi&&h===e||o===bi&&h===gi)&&v!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var Gi=0;Gi<s.length;Gi++){var Pi=s[Gi],_i=Pi.x,pi=Pi.y;if(_i===yi&&pi===e||_i===bi&&pi===gi)return this.state=u.BLOCKRIGHT,!0}if(f.some((function(t){return t.x===yi&&t.y===e}))&&(!xi||xi.turnable))return!1;if(!Mi||!Mi.moveable||xi&&!xi.turnable)return this.state=u.BLOCKRIGHT,!0}else if(r===l.BOTTOM){var Si,Di;if(yi>E-1)return this.state=u.BLOCKLEFT,!0;var Ui=i+1,Yi=e+1,wi=null===(Si=n[yi])||void 0===Si?void 0:Si[e],ki=null===(Di=n[Ui])||void 0===Di?void 0:Di[Yi];if((o===yi&&h===e||o===Ui&&h===Yi)&&v!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var Xi=0;Xi<s.length;Xi++){var Vi=s[Xi],ji=Vi.x,zi=Vi.y;if(ji===yi&&zi===e||ji===Ui&&zi===Yi)return this.state=u.BLOCKLEFT,!0}if(f.some((function(t){return t.x===yi&&t.y===e}))&&(!ki||ki.turnable))return!1;if(!wi||!wi.moveable||ki&&!ki.turnable)return this.state=u.BLOCKLEFT,!0}else if(r===l.LEFT){var Wi,Zi;if(yi>E-1)return this.state=u.BLOCKBACK,!0;var qi=i,Ji=null===(Wi=n[yi])||void 0===Wi?void 0:Wi[e],Qi=null===(Zi=n[qi])||void 0===Zi?void 0:Zi[e];if((o===yi&&h===e||o===qi&&h===e)&&v!==u.DEATH)return this.state=u.BLOCKBACK,!0;for(var $i=0;$i<s.length;$i++){var te=s[$i],ie=te.x,ee=te.y;if(ie===yi&&ee===e)return this.state=u.BLOCKBACK,!0}if(f.some((function(t){return t.x===yi&&t.y===e}))&&(!Qi||Qi.turnable))return!1;if(!Ji||!Ji.moveable||Qi&&!Qi.turnable)return this.state=u.BLOCKBACK,!0}else if(r===l.RIGHT){var re,ne;if(yi>E-1)return this.state=u.BLOCKFRONT,!0;var se=i+2,ae=null===(re=n[yi])||void 0===re?void 0:re[e],oe=null===(ne=n[se])||void 0===ne?void 0:ne[e];if((o===yi&&h===e||o===se&&h===e)&&v!==u.DEATH)return this.state=u.BLOCKFRONT,!0;for(var ue=0;ue<s.length;ue++){var Te=s[ue],he=Te.x,le=Te.y;if(he===yi&&le===e||he===se&&le===e)return this.state=u.BLOCKFRONT,!0}if(f.some((function(t){return t.x===yi&&t.y===e}))&&(!oe||oe.turnable))return!1;if(!ae||!ae.moveable||oe&&!oe.turnable)return this.state=u.BLOCKFRONT,!0}}else if(t===T.TURNLEFT){var ve,fe,Oe,de,Ee,Le,ce,Ce;if(r===l.TOP?(ce=e-1,Ce=i-1):r===l.BOTTOM?(ce=e+1,Ce=i+1):r===l.LEFT?(ce=e+1,Ce=i-1):r===l.RIGHT&&(ce=e-1,Ce=i+1),(o===i&&h===ce||o===Ce&&h===e||o===Ce&&h===ce)&&v!==u.DEATH)return this.state=u.BLOCKTURNLEFT,!0;for(var Re=0;Re<s.length;Re++){var Be=s[Re],Ke=Be.x,He=Be.y;if(Ke===Ce&&He===e)return this.state=u.BLOCKTURNLEFT,!0;if(Ke===Ce&&He===ce)return this.state=u.BLOCKTURNLEFT,!0;if(Ke===i&&He===ce)return this.state=u.BLOCKTURNLEFT,!0}if((null===(ve=n[i])||void 0===ve?void 0:ve[ce])&&!(null===(fe=n[i])||void 0===fe?void 0:fe[ce].turnable)||(null===(Oe=n[Ce])||void 0===Oe?void 0:Oe[e])&&!(null===(de=n[Ce])||void 0===de?void 0:de[e].turnable)||(null===(Ee=n[Ce])||void 0===Ee?void 0:Ee[ce])&&!(null===(Le=n[Ce])||void 0===Le?void 0:Le[ce].turnable))return this.state=u.BLOCKTURNLEFT,!0}else if(t===T.TURNRIGHT){var Ae,Ie,me,ye,Fe,Ne,be,ge;if(r===l.TOP?(ge=e-1,be=i+1):r===l.BOTTOM?(ge=e+1,be=i-1):r===l.LEFT?(ge=e-1,be=i-1):r===l.RIGHT&&(ge=e+1,be=i+1),(o===i&&h===ge||o===be&&h===e||o===be&&h===ge)&&v!==u.DEATH)return this.state=u.BLOCKTURNRIGHT,!0;for(var Me=0;Me<s.length;Me++){var xe=s[Me],Ge=xe.x,Pe=xe.y;if(Ge===be&&Pe===e)return this.state=u.BLOCKTURNRIGHT,!0;if(Ge===be&&Pe===ge)return this.state=u.BLOCKTURNRIGHT,!0;if(Ge===i&&Pe===ge)return this.state=u.BLOCKTURNRIGHT,!0}if((null===(Ae=n[i])||void 0===Ae?void 0:Ae[ge])&&!(null===(Ie=n[i])||void 0===Ie?void 0:Ie[ge].turnable)||(null===(me=n[be])||void 0===me?void 0:me[e])&&!(null===(ye=n[be])||void 0===ye?void 0:ye[e].turnable)||(null===(Fe=n[be])||void 0===Fe?void 0:Fe[ge])&&!(null===(Ne=n[be])||void 0===Ne?void 0:Ne[ge].turnable))return this.state=u.BLOCKTURNRIGHT,!0}return!1},i}(v))||E);i._RF.pop()}}}));

System.register("chunks:///_virtual/BurstStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./StateMachine.ts","./State.ts"],(function(t){"use strict";var e,i,s,a,n,r,c,h,u,o;return{setters:[function(t){e=t.cclegacy,i=t._decorator,s=t.Animation},function(t){a=t.inheritsLoose,n=t.asyncToGenerator},function(t){r=t.PARAMS_NAME_ENUM},function(t){c=t.getInitParamsTrigger,h=t.getInitParamsNumber,u=t.StateMachine},function(t){o=t.default}],execute:function(){var p;e._RF.push({},"f1eb4KiXClMtpf8r3ISFW54","BurstStateMachine",void 0);var m=i.ccclass,M=(i.property,"texture/burst");t("BurstStateMachine",m("BurstStateMachine")(p=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var i=e.prototype;return i.init=function(){var t=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponet=this.addComponent(s),this.initParams(),this.initStateMachine(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.initParams=function(){this.params.set(r.IDLE,c()),this.params.set(r.DIRECTION,h()),this.params.set(r.ATTACK,h()),this.params.set(r.DEATH,h())},i.initStateMachine=function(){this.stateMachines.set(r.IDLE,new o(this,M+"/idle")),this.stateMachines.set(r.ATTACK,new o(this,M+"/attack")),this.stateMachines.set(r.DEATH,new o(this,M+"/death"))},i.initAnimationEvent=function(){},i.run=function(){switch(this.currentState){case this.stateMachines.get(r.IDLE):case this.stateMachines.get(r.DEATH):case this.stateMachines.get(r.ATTACK):this.params.get(r.IDLE).value?this.currentState=this.stateMachines.get(r.IDLE):this.params.get(r.ATTACK).value?this.currentState=this.stateMachines.get(r.ATTACK):this.params.get(r.DEATH).value?this.currentState=this.stateMachines.get(r.DEATH):this.currentState=this.currentState;break;default:this.currentState=this.stateMachines.get(r.IDLE)}},e}(u))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/State.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./ResourceManager.ts"],(function(t){"use strict";var i,n,e,a,o,r,s,p;return{setters:[function(t){i=t.cclegacy,n=t.AnimationClip,e=t.animation,a=t.Sprite},function(t){o=t.sortSpriteFrame},function(t){r=t.defineProperty,s=t.asyncToGenerator},function(t){p=t.default}],execute:function(){i._RF.push({},"f26d3ev+ihKVbdRfhEubNT3","State",void 0);var u=t("ANIMATION_SPEED",1/8);t("default",function(){function t(t,i,e,a){void 0===e&&(e=n.WrapMode.Normal),void 0===a&&(a=u),r(this,"animationClip",void 0),this.fsm=t,this.path=i,this.wrapMode=e,this.speed=a,this.init()}var i=t.prototype;return i.init=function(){var t=s(regeneratorRuntime.mark((function t(){var i,r,s,u,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=p.Instance.loadDir(this.path),this.fsm.waitingList.push(i),t.next=4,i;case 4:r=t.sent,this.animationClip=new n,(s=new e.ObjectTrack).path=(new e.TrackPath).toComponent(a).toProperty("spriteFrame"),u=o(r).map((function(t,i){return[h.speed*i,t]})),s.channel.curve.assignSorted(u),this.animationClip.addTrack(s),this.animationClip.name=this.path,this.animationClip.duration=u.length*this.speed,this.animationClip.wrapMode=this.wrapMode;case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.run=function(){var t,i;(null===(t=this.fsm.animationComponet)||void 0===t||null===(i=t.defaultClip)||void 0===i?void 0:i.name)!==this.animationClip.name&&(this.fsm.animationComponet.defaultClip=this.animationClip,this.fsm.animationComponet.play())},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/WoodenSkeletonManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./EventManager.ts","./DataManager.ts","./WoodenSkeletonStateMachine.ts","./EnemyManager.ts"],(function(t){"use strict";var n,e,a,o,r,s,i,c,u,f;return{setters:[function(t){n=t.cclegacy,e=t._decorator},function(t){a=t.inheritsLoose,o=t.asyncToGenerator},function(t){r=t.EVENT_ENUM,s=t.ENTITY_STATE_ENUM},function(t){i=t.default},function(t){c=t.default},function(t){u=t.WoodenSkeletonStateMachine},function(t){f=t.EnemyManager}],execute:function(){var h;n._RF.push({},"f9a2ag4S3JAX7v7c0pK2ofo","WoodenSkeletonManager",void 0);var l=e.ccclass;e.property,t("WoodenSkeletonManager",l("WoodenSkeletonManager")(h=function(t){function n(){return t.apply(this,arguments)||this}a(n,t);var e=n.prototype;return e.init=function(){var n=o(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.fsm=this.addComponent(u),n.next=3,this.fsm.init();case 3:t.prototype.init.call(this,e),i.Instance.on(r.PLAYER_MOVE_END,this.onAttack,this);case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),e.onDestroy=function(){t.prototype.onDestroy.call(this),i.Instance.off(r.PLAYER_MOVE_END,this.onAttack)},e.onAttack=function(){if(this.state!==s.DEATH&&c.Instance.player){var t=c.Instance.player,n=t.x,e=t.y,a=t.state;(this.x===n&&Math.abs(this.y-e)<=1||this.y===e&&Math.abs(this.x-n)<=1)&&a!=s.DEATH&&a!=s.AIRDEATH?(this.state=s.ATTACK,i.Instance.emit(r.ATTACK_PLAYER,s.DEATH)):this.state=s.IDLE}},n}(f))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/AttackSubStateMachine2.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index2.ts","./State.ts","./DirectionSubStateMachine.ts"],(function(t){"use strict";var e,n,a,c,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){a=t.DIRECTION_ENUM},function(t){c=t.default},function(t){s=t.default}],execute:function(){e._RF.push({},"fc47dU/bvdN5IbeAW43Yfvh","AttackSubStateMachine",void 0);var i="texture/player/attack";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachines.set(a.TOP,new c(e,i+"/top")),n.stateMachines.set(a.BOTTOM,new c(e,i+"/bottom")),n.stateMachines.set(a.LEFT,new c(e,i+"/left")),n.stateMachines.set(a.RIGHT,new c(e,i+"/right")),n}return n(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Singleton.ts"],(function(t){"use strict";var e,n,o,s,i,r;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose,o=t.createClass,s=t.defineProperty,i=t.assertThisInitialized},function(t){r=t.default}],execute:function(){e._RF.push({},"fd6cfSXWR1BnrlE2P9oCfQG","DataManager",void 0);t("default",function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,s(i(e),"mapInfo",void 0),s(i(e),"tileInfo",void 0),s(i(e),"mapRowCount",0),s(i(e),"mapColumnCount",0),s(i(e),"levelIndex",1),s(i(e),"player",void 0),s(i(e),"door",void 0),s(i(e),"enemies",void 0),s(i(e),"bursts",void 0),s(i(e),"spikes",void 0),s(i(e),"smokes",void 0),s(i(e),"records",void 0),e}return n(e,t),e.prototype.reset=function(){this.mapInfo=[],this.tileInfo=[],this.bursts=[],this.smokes=[],this.spikes=[],this.records=[],this.enemies=[],this.door=null,this.player=null,this.mapRowCount=0,this.mapColumnCount=0},o(e,null,[{key:"Instance",get:function(){return t.GetInstance.call(this)}}]),e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./index2.ts","./StateMachine.ts","./Singleton.ts","./ResourceManager.ts","./State.ts","./SubStateMachine.ts","./DirectionSubStateMachine.ts","./IdleSubStateMachine3.ts","./DeathSubStateMachine.ts","./DoorStateMachine.ts","./BlockTurnRightSubStateMachine.ts","./BlockRightSubStateMachine.ts","./TileManager.ts","./EntityManager.ts","./SpikesSubStateMachine.ts","./SpikesOneSubStateMachine.ts","./SpikesTwoSubStateMachine.ts","./SpikesThreeSubStateMachine.ts","./SpikesFourSubStateMachine.ts","./EventManager.ts","./DataManager.ts","./SpikesManager.ts","./SpikesStateMachine.ts","./level6.ts","./level3.ts","./IdleSubStateMachine.ts","./DeathSubStateMachine2.ts","./SmokeStateMachine.ts","./level2.ts","./level17.ts","./BurstStateMachine.ts","./BurstManager.ts","./level8.ts","./BlockBackSubStateMachine.ts","./BlockLeftSubStateMachine.ts","./ShakeManager.ts","./level15.ts","./level18.ts","./level5.ts","./BlockTurnLeftSubStateMachine.ts","./level10.ts","./TileMapManager.ts","./level1.ts","./level11.ts","./level12.ts","./level13.ts","./level14.ts","./level16.ts","./level19.ts","./level20.ts","./level21.ts","./level4.ts","./level7.ts","./level9.ts","./index3.ts","./IdleSubStateMachine5.ts","./TurnLeftSubStateMachine.ts","./BlockFrontSubStateMachine.ts","./DeathSubStateMachine3.ts","./AttackSubStateMachine2.ts","./AirDeathSubStateMachine.ts","./TurnRightSubStateMachine.ts","./PlayerStateMachine.ts","./PlayerManager.ts","./IdleSubStateMachine2.ts","./AttackSubStateMachine.ts","./DeathSubStateMachine5.ts","./WoodenSkeletonStateMachine.ts","./EnemyManager.ts","./WoodenSkeletonManager.ts","./DoorManager.ts","./IdleSubStateMachine4.ts","./DeathSubStateMachine4.ts","./IronSkeletonStateMachine.ts","./IronSkeletonManager.ts","./SmokeManager.ts","./DrawManager.ts","./FadeManager.ts","./BattleManager.ts","./ControllerManager.ts","./MenuManager.ts","./LoadingManager.ts","./StartManager.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});